<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://yoursite.com/page/3/index.html">
<meta property="og:site_name" content="Hexo">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hexo">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <!--<link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">-->
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-t24652" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/03/18/t24652/" class="article-date">
  <time datetime="2018-03-18T09:06:53.000Z" itemprop="datePublished">2018-03-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/03/18/t24652/">t24652 lyq的水坑</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="https://www.luogu.org/problemnew/show/T24652" target="_blank" rel="external">lyq的水坑</a></p>
<h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p>gryz 有一个大坑, 坑被限制在一个 $n × m$ 的矩形区域内, 第 i 行第 j 列它的高度为 $h_{i,j}$, 有一 天天上突然下起了倾盆大雨, 大坑变成了大水坑, 求坑中最多聚集多少水. 注意, 只有坑的内部才 能蓄积水 , 平地不能蓄积水, 坑的边界也不能蓄积水.一个点蓄积的水不会溢出的条件是其无法遍历到比其高度低的点.</p>
<h3 id="输入输出格式"><a href="#输入输出格式" class="headerlink" title="输入输出格式"></a>输入输出格式</h3><p>输入格式：<br>第一行两个数 n,m. 接下来 n 行每行 m 个数, 第 i 行为 w_{i,1} w_{i,2}···w_{i,m}w<br>i,1<br>​     w<br>i,2<br>​     ⋅⋅⋅w<br>i,m<br>​     </p>
<p>输出格式：<br>输出一行水坑能蓄积的水的数量.</p>
<h3 id="输入输出样例"><a href="#输入输出样例" class="headerlink" title="输入输出样例"></a>输入输出样例</h3><p>输入样例#1： </p>
<pre><code>5 5
0 0 5 0 0
0 4 3 8 2
9 5 7 2 7
1 9 6 5 4
1 0 0 6 2
</code></pre><p>输出样例#1： </p>
<pre><code>4
</code></pre><p>输入样例#2： </p>
<pre><code>10 10
0 0 0 0 0 0 0 0 0 0
0 5 2 6 4 3 1 7 8 0
0 6 4 2 3 5 1 4 6 0
0 3 6 4 1 2 4 7 8 0
0 2 5 5 1 2 3 4 4 0
0 2 3 1 5 4 4 1 4 0 
0 4 1 2 3 4 5 2 1 0
0 7 5 5 1 5 4 5 7 0
0 1 3 5 5 4 6 8 7 0
0 0 0 0 0 0 0 0 0 0
</code></pre><p>输出样例#2： </p>
<pre><code>23
</code></pre><h3 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h3><p>对于 10%的数据, n,m ≤ 5;<br>对于 30%的数据, n,m ≤ 20;<br>对于另外 30%的数据, 不存在高度为 0 的点;<br>对于 100%的数据, n,m ≤ 100. 数据保证不会得零分.</p>
<h3 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h3><p>　　我们在 solution1 中对那种情况无能为力, 原因很简单, 因为我们更新一<br>个点是根据其周围的点, 而其周围的点的此时高度并不一定是其最终的高度,<br>因此导致无法更新.<br>　　解决这个问题的方法是从已经确立了高度的点中向周围更新, 在一开始,<br>边界上的点为确立了高度的点, 所以将边界上所有的点加入一个小根堆, 每<br>次弹出高度最小的点开始更新, 其遍历到的点的高度将被确立, 如果其高度<br>大于用来更新的点, 其高度不变, 否则其高度为用来更新的点, 而且可以保证<br>这就是它的最终高度,(以后不能再对其进行更新) 所以将其加入小根堆, 继<br>续更新. 算法步骤:<br>(1). 找出处于边界上的格子. 将其加入小根堆.<br>(2). 重复下面步骤直到堆为空.<br>　　(a). 弹出堆中最小的元素记为 (i,j).<br>　　(b). 遍历 (i,j) 上下左右四个元素 (x,y), 若 (x,y) 被加入过队列或者是<br>被更新过则跳过下面步骤. 若 (x,y) 高度小于 (i,j),h x,y = h i,j ; 否<br>则其高度不变.<br>　　(c). 将 (x,y) 加入堆中.<br>(3). 将每个格子的最终高度与原始高度的差值加进答案.<br>每个点只被加入小根堆一次, 复杂度 $O(n^2 \log n^2)$, 可以通过 100% 的数<br>据.</p>
<h3 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> N 105</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"> </div><div class="line"><span class="keyword">struct</span> Node&#123;</div><div class="line">	<span class="keyword">int</span> x,y,hei;</div><div class="line">	<span class="keyword">inline</span> <span class="keyword">bool</span> <span class="keyword">operator</span>&lt;(<span class="keyword">const</span> Node&amp; s)<span class="keyword">const</span>&#123;</div><div class="line">		<span class="keyword">return</span> hei&gt;s.hei;</div><div class="line">	&#125;</div><div class="line">&#125;;</div><div class="line"> </div><div class="line">priority_queue&lt;Node&gt;que;</div><div class="line"> </div><div class="line"><span class="keyword">int</span> dx[<span class="number">10</span>]=&#123;<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">-1</span>&#125;;</div><div class="line"><span class="keyword">int</span> dy[<span class="number">10</span>]=&#123;<span class="number">1</span>,<span class="number">-1</span>,<span class="number">0</span>,<span class="number">0</span>&#125;;</div><div class="line"><span class="keyword">int</span> edge[N][N];</div><div class="line"><span class="keyword">int</span> vis[N][N];</div><div class="line"><span class="keyword">int</span> visit[N][N];</div><div class="line"><span class="keyword">int</span> mx,my,mh;</div><div class="line"><span class="keyword">int</span> p[N][N];</div><div class="line"><span class="keyword">int</span> n,m;</div><div class="line"><span class="keyword">int</span> ans;</div><div class="line"> </div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">Chao</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>&#123;</div><div class="line">	<span class="keyword">if</span>(x&lt;<span class="number">1</span>||y&lt;<span class="number">1</span>||x&gt;n||y&gt;m)<span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">	<span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">check</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>&#123;</div><div class="line">	<span class="keyword">if</span>(x==<span class="number">1</span>||y==<span class="number">1</span>||x==n||y==m)<span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">DFS</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>&#123;</div><div class="line">	visit[x][y]=<span class="literal">true</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">4</span>;++i)&#123;</div><div class="line">		<span class="keyword">int</span> xx=x+dx[i],yy=y+dy[i];</div><div class="line">		<span class="keyword">if</span>(Chao(xx,yy))<span class="keyword">continue</span>;</div><div class="line">		<span class="keyword">if</span>(visit[xx][yy])<span class="keyword">continue</span>;</div><div class="line">		<span class="keyword">if</span>(p[xx][yy])&#123;</div><div class="line">			visit[x][y]=<span class="literal">true</span>;</div><div class="line">			edge[xx][yy]=<span class="literal">true</span>;</div><div class="line">			<span class="keyword">continue</span>;</div><div class="line">		&#125;</div><div class="line">		DFS(xx,yy);</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>&#123;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">4</span>;++i)&#123;</div><div class="line">		<span class="keyword">int</span> xx=x+dx[i],yy=y+dy[i];</div><div class="line">		<span class="keyword">if</span>(Chao(xx,yy))<span class="keyword">continue</span>;</div><div class="line">		<span class="keyword">if</span>(vis[xx][yy])<span class="keyword">continue</span>;</div><div class="line">		<span class="keyword">if</span>(edge[xx][yy])<span class="keyword">continue</span>;</div><div class="line">		<span class="keyword">if</span>(!p[xx][yy])<span class="keyword">continue</span>;</div><div class="line">		<span class="keyword">if</span>(p[xx][yy]&lt;=p[x][y])&#123;</div><div class="line">			ans+=p[x][y]-p[xx][yy];</div><div class="line">			p[xx][yy]=p[x][y];</div><div class="line">			vis[xx][yy]=<span class="literal">true</span>;</div><div class="line">			dfs(xx,yy);</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">else</span>&#123;</div><div class="line">			que.push((Node)&#123;xx,yy,p[xx][yy]&#125;);</div><div class="line">			vis[xx][yy]=<span class="literal">true</span>;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"> </div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">	freopen(<span class="string">"first5.in"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</div><div class="line">	freopen(<span class="string">"first5.out"</span>,<span class="string">"w"</span>,<span class="built_in">stdout</span>);</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;m);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=m;++j)&#123;</div><div class="line">			<span class="keyword">int</span> hei;</div><div class="line">			<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;hei);p[i][j]=hei;</div><div class="line">			<span class="keyword">if</span>(check(i,j)&amp;&amp;p[i][j])edge[i][j]=visit[i][j]=<span class="literal">true</span>;</div><div class="line">		&#125;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=m;++j)</div><div class="line">			<span class="keyword">if</span>(!p[i][j]&amp;&amp;!visit[i][j])</div><div class="line">				DFS(i,j);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=m;++j)</div><div class="line">			<span class="keyword">if</span>(edge[i][j])&#123;</div><div class="line">				vis[i][j]=<span class="literal">true</span>;</div><div class="line">				que.push((Node)&#123;i,j,p[i][j]&#125;);</div><div class="line">			&#125;</div><div class="line">	<span class="keyword">while</span>(!que.empty())&#123;</div><div class="line">		Node top=que.top();</div><div class="line">		que.pop();</div><div class="line">		dfs(top.x,top.y);</div><div class="line">	&#125;</div><div class="line">	<span class="built_in">cout</span>&lt;&lt;ans&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/03/18/t24652/" data-id="cjftq8nym008ke0kems4a6tga" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-p2607" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/03/18/p2607/" class="article-date">
  <time datetime="2018-03-18T08:52:04.000Z" itemprop="datePublished">2018-03-18</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/信息学竞赛/">信息学竞赛</a>►<a class="article-category-link" href="/categories/信息学竞赛/题目/">题目</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/03/18/p2607/">P2607 ZJOI2008 骑士</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p>Z国的骑士团是一个很有势力的组织，帮会中汇聚了来自各地的精英。他们劫富济贫，惩恶扬善，受到社会各界的赞扬。<br>最近发生了一件可怕的事情，邪恶的Y国发动了一场针对Z国的侵略战争。战火绵延五百里，在和平环境中安逸了数百年的Z国又怎能抵挡的住Y国的军队。于是人们把所有的希望都寄托在了骑士团的身上，就像期待有一个真龙天子的降生，带领正义打败邪恶。<br>骑士团是肯定具有打败邪恶势力的能力的，但是骑士们互相之间往往有一些矛盾。每个骑士都有且仅有一个自己最厌恶的骑士（当然不是他自己），他是绝对不会与自己最厌恶的人一同出征的。<br>战火绵延，人民生灵涂炭，组织起一个骑士军团加入战斗刻不容缓！国王交给了你一个艰巨的任务，从所有的骑士中选出一个骑士军团，使得军团内没有矛盾的两人（不存在一个骑士与他最痛恨的人一同被选入骑士军团的情况），并且，使得这支骑士军团最具有战斗力。<br>为了描述战斗力，我们将骑士按照1至N编号，给每名骑士一个战斗力的估计，一个军团的战斗力为所有骑士的战斗力总和。</p>
<h3 id="输入输出格式"><a href="#输入输出格式" class="headerlink" title="输入输出格式"></a>输入输出格式</h3><p>输入格式：<br>输入文件knight.in第一行包含一个正整数N，描述骑士团的人数。<br>接下来N行，每行两个正整数，按顺序描述每一名骑士的战斗力和他最痛恨的骑士。<br>输出格式：<br>输出文件knight.out应包含一行，包含一个整数，表示你所选出的骑士军团的战斗力。</p>
<h3 id="输入输出样例"><a href="#输入输出样例" class="headerlink" title="输入输出样例"></a>输入输出样例</h3><p>输入样例#1：<br>3<br>10 2<br>20 3<br>30 1<br>输出样例#1：<br>30</p>
<h3 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h3><p>对于30%的测试数据，满足N ≤ 10；<br>对于60%的测试数据，满足N ≤ 100；<br>对于80%的测试数据，满足N ≤ 10 000。<br>对于100%的测试数据，满足N ≤ 1 000 000，每名骑士的战斗力都是不大于 1 000 000的正整数。</p>
<h3 id="做法"><a href="#做法" class="headerlink" title="做法:"></a>做法:</h3><p>　　如果将人与人之间的厌恶构成的关系看做是一个图的话, 图上有n个点和n条边且每个人只能被一个人厌恶和厌恶别人, 一个点只能连接两条边, 这表明图实际上是基环树森林.<br>　　而对于不联通的两个基环树, 它们之间的没有联系, 因此可以分开来考虑.而对于一条有向边$u\rightarrow v$, 发现完全可以将边换成无向边, 这样边$u\rightarrow v$就表示$u$不能和$v$在一起.<br>　　对于一棵基环树上的答案, 就是选择若干点, 使得其没有边相连且其收益最大.但是基环树不是很好处理, 因此可以破环为链, 按照树形dp的思路去做.而对于被拆开的环上的两个点, 只需要使两个点不能同时被选择即可, 将两个点分别作为根进行dp.</p>
<h3 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/03/18/p2607/" data-id="cjftq8nxj0062e0keifzj0t63" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/基环树/">基环树</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/树形dp/">树形dp</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-p3195" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/03/17/p3195/" class="article-date">
  <time datetime="2018-03-17T12:44:44.000Z" itemprop="datePublished">2018-03-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/信息学竞赛/">信息学竞赛</a>►<a class="article-category-link" href="/categories/信息学竞赛/题目/">题目</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/03/17/p3195/">Luogu P3195 HNOI2008 玩具装箱TOY</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p>　　P教授要去看奥运，但是他舍不下他的玩具，于是他决定把所有的玩具运到北京。他使用自己的压缩器进行压缩，其可以将任意物品变成一堆，再放到一种特殊的一维容器中。P教授有编号为1…N的N件玩具，第i件玩具经过压缩后变成一维长度为Ci.为了方便整理，P教授要求在一个一维容器中的玩具编号是连续的。同时如果一个一维容器中有多个玩具，那么两件玩具之间要加入一个单位长度的填充物，形式地说如果将第i件玩具到第j个玩具放到一个容器中，那么容器的长度将为 x=j-i+Sigma(Ck) i&lt;=K&lt;=j 制作容器的费用与容器的长度有关，根据教授研究，如果容器长度为x,其制作费用为(X-L)^2.其中L是一个常量。P教授不关心容器的数目，他可以制作出任意长度的容器，甚至超过L。但他希望费用最小.</p>
<h3 id="输入输出格式"><a href="#输入输出格式" class="headerlink" title="输入输出格式"></a>输入输出格式</h3><h4 id="输入格式："><a href="#输入格式：" class="headerlink" title="输入格式："></a>输入格式：</h4><p>　　第一行输入两个整数N，L.接下来N行输入Ci.1&lt;=N&lt;=50000,1&lt;=L,Ci&lt;=10^7</p>
<h4 id="输出格式："><a href="#输出格式：" class="headerlink" title="输出格式："></a>输出格式：</h4><p>　　输出最小费用</p>
<h3 id="输入输出样例"><a href="#输入输出样例" class="headerlink" title="输入输出样例"></a>输入输出样例</h3><h4 id="输入样例-1："><a href="#输入样例-1：" class="headerlink" title="输入样例#1："></a>输入样例#1：</h4><pre><code>5 4
3
4
2
1
4
</code></pre><h4 id="输出样例-1："><a href="#输出样例-1：" class="headerlink" title="输出样例#1："></a>输出样例#1：</h4><pre><code>1
</code></pre><h3 id="做法"><a href="#做法" class="headerlink" title="做法:"></a>做法:</h3><p>　　用$f(i)$表示前$i$个物品的长度加物品个数$s_n=\sum\limits_{i=1}^nc_i+j$, 那么第$i$到$j$个物品的长度加物品个数就为$s_j-s_{i-1}$.这就是题目要求的$(x-l)^2$中的x.<br>　　首先可以想出一个朴素的dp.$f(i)$表示前$i$个数放到若干个盒子里(放满)的最小花费.则$f(i)$为$j$个物品最小代价加上这个盒子的代价, 转移方程为:<br>$$f(i)=\max{f(j)+(s_i-s_j-l-1)^2},j&lt;i$$</p>
<p>　　表示新加一个盒子装第$j+1$到$i$个物品.<br>　　优化这个$n^2$转移的方法主要有两种.</p>
<ul>
<li>斜率优化</li>
<li>决策单调性</li>
</ul>
<p>　　斜率优化的复杂度较低, 为$O(n)$, 这是考虑到其单调队列复杂度为均摊$O(7n)$.而一次转移只需要取出单调队列中的一个最小值.<br>    .<br>　　在$N^2$转移中, 求$f(i)$需要枚举从$j,j&lt; i$转移的代价.可以通过维护一个单调队列来将这一过程优化到$O(1)$, 考虑从$k$转移到$i$比从$j$转移到$i$代价更低, 其满足这么一个不等式.</p>
<p>$$f(j)+(s_j-s_i-l-1)^2&gt;f(k)+(s_k-s_i-l-1)^2$$<br>将这个式子展开可以得到如此的限制关系.</p>
<p>$$s_i&gt;\frac{f_k-f_i+(s_k+1+1)^2-(s_j+1+1)^2}{s\cdot(s_k-s_j)}$$<br>将右边的式子记为$p(k,j)$, 可以发现求得最大的$p(k,j)$满足$s_i&gt;p(k,j)$, 则$f(i)$为$f(k)+(s_k-s_i-l)^2$.<br>　　通过维护一个单调递增队列,用$q_i$表示队列中的元素, $q_h, q_t$表示队头和队尾.单调队列中的元素是可以转移至答案的点, 答案从队首寻找.单调队列中元素的单调性是指满足$p(q_{i+1},q_{i})&lt;p(q_{i+2},q_{i+1})$,对于$f(1)$到$f(n)$的求值, 因为$s_i$为单调递增, 所以可以保证删除队列手元素不会影响答案.</p>
<ul>
<li>求$f(i)$时, 如果$p(q_{h+1},q_{h})\leq s_i$,就弹出队首.直到无法弹出时即从$q_h$其转移至当前点最优.</li>
<li>每次将一个点$i$加入队列时, 为了保证队列的单调性, 依次弹出队尾直到满足单调递增.<h3 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> N 100005</span></div><div class="line"></div><div class="line"><span class="keyword">long</span> <span class="keyword">long</span> sum[N];</div><div class="line"><span class="keyword">long</span> <span class="keyword">long</span> f[N];</div><div class="line"><span class="keyword">int</span> q[N];</div><div class="line"><span class="keyword">int</span> h,t;</div><div class="line"><span class="keyword">int</span> n,l;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">long</span> <span class="keyword">long</span> <span class="title">pow</span><span class="params">(<span class="keyword">long</span> <span class="keyword">long</span> s)</span></span>&#123;</div><div class="line"><span class="keyword">return</span> (<span class="keyword">long</span> <span class="keyword">long</span>)s*s;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">double</span> <span class="title">cmp</span><span class="params">(<span class="keyword">int</span> i,<span class="keyword">int</span> j)</span></span>&#123;</div><div class="line">	<span class="keyword">return</span> (<span class="keyword">double</span>)(f[j]-f[i]+<span class="built_in">pow</span>(sum[j]+l)-<span class="built_in">pow</span>(sum[i]+l))/(<span class="number">2</span>*(sum[j]-sum[i]));</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="keyword">long</span> <span class="keyword">long</span> temp;</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;l);l+=<span class="number">1</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%lld"</span>,&amp;temp);</div><div class="line">		sum[i]=(<span class="keyword">long</span> <span class="keyword">long</span>)sum[i<span class="number">-1</span>]+<span class="number">1</span>+temp;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</div><div class="line">		<span class="keyword">while</span>(h&lt;t&amp;&amp;cmp(q[h],q[h+<span class="number">1</span>])&lt;=(<span class="keyword">double</span>)sum[i])++h;</div><div class="line">		f[i]=(<span class="keyword">long</span> <span class="keyword">long</span>)f[q[h]]+<span class="built_in">pow</span>(sum[i]-sum[q[h]]-l);</div><div class="line">		<span class="keyword">while</span>(h&lt;t&amp;&amp;cmp(q[t<span class="number">-1</span>],q[t])&gt;cmp(q[t],i))--t;</div><div class="line">		q[++t]=i;</div><div class="line">	&#125;</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"%lld"</span>,f[n]);</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/03/17/p3195/" data-id="cjftq8ny6007ie0keq9poyzbk" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/决策单调性/">决策单调性</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/动态规划/">动态规划</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/斜率优化/">斜率优化</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-bzoj2298" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/03/17/bzoj2298/" class="article-date">
  <time datetime="2018-03-17T11:32:24.000Z" itemprop="datePublished">2018-03-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/03/17/bzoj2298/">bzoj2298</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/03/17/bzoj2298/" data-id="cjftq8nug0016e0keu5a4oumb" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-p4322" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/03/17/p4322/" class="article-date">
  <time datetime="2018-03-17T09:56:07.000Z" itemprop="datePublished">2018-03-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/信息学竞赛/">信息学竞赛</a>►<a class="article-category-link" href="/categories/信息学竞赛/题目/">题目</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/03/17/p4322/">P4322 [JSOI2016]最佳团体</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="https://www.luogu.org/problemnew/show/P4322" target="_blank" rel="external">P4322 JSOI2016 最佳团体</a></p>
<h4 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h4><p>JSOI 信息学代表队一共有 $N$名候选人，这些候选人从 $1$ 到$ N$ 编号。方便起见，JYY 的编号是 00 号。每个候选人都由一位编号比他小的候选人 $R_i$ 推荐。如果 $R_i = 0$ ，则说明这个候选人是 JYY 自己看上的。为了保证团队的和谐，JYY 需要保证，如果招募了候选人 $i$ ，那么候选人 $R_i$ 也一定需要在团队中。当然了，JYY 自己总是在团队里的。每一个候选人都有一个战斗值 $P_i$ ，也有一个招募费用 $S_i i$ 。JYY 希望招募 K 个候选人（JYY 自己不算），组成一个性价比最高的团队。也就是，这 $K$ 个被 JYY 选择的候选人的总战斗值与总招募费用的比值最大。<br>输入输出格式</p>
<h4 id="输入格式："><a href="#输入格式：" class="headerlink" title="输入格式："></a>输入格式：</h4><p>输入一行包含两个正整数 $K$ 和 $N$ 。<br>接下来 NN 行，其中第 ii 行包含三个整数 $S_i$, $P_i$,$ R_i$, 表示候选人 $i$ 的招募费用，战斗值和推荐人编号。</p>
<h4 id="输出格式："><a href="#输出格式：" class="headerlink" title="输出格式："></a>输出格式：</h4><p>输出一行一个实数，表示最佳比值。答案保留三位小数。</p>
<h4 id="输入输出样例"><a href="#输入输出样例" class="headerlink" title="输入输出样例"></a>输入输出样例</h4><h5 id="输入样例-1："><a href="#输入样例-1：" class="headerlink" title="输入样例#1："></a>输入样例#1：</h5><pre><code>1 2
1000 1 0
1 1000 1
</code></pre><h5 id="输出样例-1："><a href="#输出样例-1：" class="headerlink" title="输出样例#1："></a>输出样例#1：</h5><pre><code>0.001
</code></pre><h4 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h4><p>对于100%的数据满足$1\leq K\leq N\leq 2500,0&lt; s_i,p_i \leq 10^4,0\leq R_i&lt; i$.</p>
<h4 id="做法"><a href="#做法" class="headerlink" title="做法:"></a>做法:</h4><p>　　可以看出这是<a href="http://aiyoupass.com/2018/Scoreplanning/">01分数规划问题</a>, 但是问题的模型是一个树形依赖背包问题.也就是如果选择一个点的话, 必须将其祖先全部选上.所以在原有的<strong>二分答案</strong>的基础上, 还需要用<strong>树形dp/树形依赖背包</strong>去判定, 求出在树上选择$k$个点的获益是否大于0, 关于<strong>树形dp/树形依赖背包</strong>可以看<a href="https://www.luogu.org/problemnew/show/P2014" target="_blank" rel="external">P2014 选课</a>.</p>
<h4 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> N 2505</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> eps 1e-7</span></div><div class="line"><span class="keyword">using</span> <span class="built_in">std</span>::max;</div><div class="line"></div><div class="line"><span class="keyword">struct</span> Edge&#123;</div><div class="line">	<span class="keyword">int</span> v,nxt;</div><div class="line">&#125;e[N&lt;&lt;<span class="number">2</span>];</div><div class="line"><span class="keyword">int</span> head[N],tot;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">AddEdge</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v)</span></span>&#123;</div><div class="line">	e[++tot]=(Edge)&#123;v,head[u]&#125;;head[u]=tot;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">double</span> f[N][N];</div><div class="line"><span class="keyword">int</span> a[N],b[N];</div><div class="line"><span class="keyword">double</span> c[N];</div><div class="line"><span class="keyword">int</span> d[N];</div><div class="line"><span class="keyword">int</span> n,k;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</div><div class="line">	<span class="keyword">int</span> son=<span class="number">0</span>;</div><div class="line">	f[x][<span class="number">0</span>]=c[x];</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=head[x];i;i=e[i].nxt)&#123;</div><div class="line">        <span class="keyword">int</span> V=e[i].v,t=dfs(V);</div><div class="line">        son+=t+<span class="number">1</span>;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=son;j&gt;=<span class="number">0</span>;--j)</div><div class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">0</span>;k&lt;=t;++k)</div><div class="line">                <span class="keyword">if</span>(j-k<span class="number">-1</span>&gt;=<span class="number">0</span>)</div><div class="line">                    f[x][j]=max(f[x][j],f[x][j-k<span class="number">-1</span>]+f[V][k]);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> son;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">check</span><span class="params">(<span class="keyword">double</span> mid)</span></span>&#123;</div><div class="line">	<span class="built_in">memset</span>(f,<span class="number">0xc2</span>,<span class="keyword">sizeof</span>(f));</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)</div><div class="line">		c[i]=(<span class="keyword">double</span>)a[i]-(<span class="keyword">double</span>)mid*b[i];</div><div class="line">	dfs(<span class="number">0</span>);</div><div class="line">	<span class="keyword">return</span> f[<span class="number">0</span>][k]&gt;=<span class="number">0</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;k,&amp;n);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;b[i],&amp;a[i],&amp;d[i]);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)</div><div class="line">		AddEdge(d[i],i);</div><div class="line">	<span class="keyword">double</span> l=<span class="number">0.00</span>,r=<span class="number">1000.0</span>,mid;</div><div class="line">	<span class="keyword">while</span>(r-l&gt;eps)&#123;</div><div class="line">		mid=(l+r)/<span class="number">2.0</span>;</div><div class="line">		<span class="keyword">if</span>(check(mid))l=mid;</div><div class="line">		<span class="keyword">else</span> r=mid;</div><div class="line">	&#125;</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"%.3lf"</span>,l);</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/03/17/p4322/" data-id="cjftq8nxz006ye0kejt9tj6zj" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/分数规划/">分数规划</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/动态规划/">动态规划</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/树形dp/">树形dp</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Scoreplanning" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/03/17/Scoreplanning/" class="article-date">
  <time datetime="2018-03-17T06:07:55.000Z" itemprop="datePublished">2018-03-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/信息学竞赛/">信息学竞赛</a>►<a class="article-category-link" href="/categories/信息学竞赛/总结/">总结</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/03/17/Scoreplanning/">01分数规划</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="解法"><a href="#解法" class="headerlink" title="解法:"></a>解法:</h3><p>　　处理这个问题的一半思路是二分一个值$d$, 我们只需要求$d$能否成为答案也就是是否存在$S$满足$\frac{\sum a_i}{\sum b_i}\ge d,i\in S$即可.这样问题就变成了一个判定性问题了.<br>　　01分数规划问题还有一种更高效的迭代方法.在此不做讨论.<br>　　对$\frac{\sum a_i}{\sum b_i}\ge d,i\in S$进行一定的变形.<br>$$<br>\frac{\sum a_i}{\sum b_i}\ge d\\<br>\sum a_i\ge d\sum b_i\\<br>\sum a_i-d\sum b_{i}\ge 0 \\<br>\sum a_i-d\cdot b_i \ge 0<br>$$<br>　　只需要求出$a_i-d\cdot b_i$, 然后看$\max{a_i-d\cdot b_i}$是否大于零即可.如果要求至少需要$k$个元素, 就将最大的$k$个加起来.</p>
<h3 id="例题"><a href="#例题" class="headerlink" title="例题:"></a>例题:</h3><p><a href="http://poj.org/problem?id=2976" target="_blank" rel="external">POJ 2976 Dropping tests</a></p>
<h4 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h4><p>　　In acertain course, you take n tests. If you get ai out of bi questions correct on test i, your cumulative average is defined to be.</p>
<p>　　Given your test scores and a positive integer k, determine how high you can make your cumulative average if you are allowed to drop any k of your test scores.</p>
<p>　　Suppose you take 3 tests with scores of 5/5, 0/1, and 2/6. Without dropping any tests, your cumulative average is . However, if you drop the third test, your cumulative average becomes .</p>
<h4 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h4><p>　　The input test file will contain multiple test cases, each containing exactly three lines. The first line contains two integers, 1 ≤ n ≤ 1000 and 0 ≤ k &lt; n. The second line contains n integers indicating ai for all i. The third line contains n positive integers indicating bi for all i. It is guaranteed that 0 ≤ ai ≤ bi ≤ 1, 000, 000, 000. The end-of-file is marked by a test case with n = k = 0 and should not be processed.</p>
<h4 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h4><p>　　For each test case, write a single line with the highest cumulative average possible after dropping k of the given test scores. The average should be rounded to the nearest integer.</p>
<h4 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h4><pre><code>3 1
5 0 2
5 1 6
4 2
1 2 7 9
5 6 7 9
0 0
</code></pre><h4 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h4><pre><code>83
100
</code></pre><h4 id="Hint"><a href="#Hint" class="headerlink" title="Hint"></a>Hint</h4><p>　　To avoid ambiguities due to rounding errors, the judge tests have been constructed so that all answers are at least 0.001 away from a decision boundary (i.e., you can assume that the average is never 83.4997).</p>
<p>Source<br>Stanford Local 2005</p>
<h4 id="做法"><a href="#做法" class="headerlink" title="做法:"></a>做法:</h4><p>　　根据上述解法处理即可.</p>
<h4 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h4><p>注意在POJ上要用C++提交.G++会出锅.<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> N 100005</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> eps 1e-6</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">int</span> n,k;</div><div class="line"><span class="keyword">double</span> c[N];</div><div class="line"><span class="keyword">int</span> a[N],b[N];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">check</span><span class="params">(<span class="keyword">double</span> mid)</span></span>&#123;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)</div><div class="line">		c[i]=(<span class="keyword">double</span>)a[i]-(<span class="keyword">double</span>)mid*b[i];</div><div class="line">	<span class="keyword">double</span> ans=<span class="number">0.0</span>;</div><div class="line">	sort(c+<span class="number">1</span>,c+n+<span class="number">1</span>);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=n;i&gt;=k+<span class="number">1</span>;--i)</div><div class="line">		ans+=c[i];</div><div class="line">	<span class="keyword">return</span> ans&gt;=<span class="number">0</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="keyword">double</span> ans;</div><div class="line">	<span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;k),n|k)&#123;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)</div><div class="line">			<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;a[i]);</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)</div><div class="line">			<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;b[i]);</div><div class="line">		<span class="keyword">double</span> l=<span class="number">0.0</span>,r=<span class="number">1.0</span>,mid;</div><div class="line">		<span class="keyword">while</span>(r-l&gt;eps)&#123;</div><div class="line">			mid=(<span class="keyword">double</span>)(l+r)/<span class="number">2</span>;</div><div class="line">			<span class="keyword">if</span>(check(mid))l=mid;</div><div class="line">			<span class="keyword">else</span> r=mid;</div><div class="line">		&#125;</div><div class="line">		<span class="built_in">printf</span>(<span class="string">"%.0lf\n"</span>,l*<span class="number">100.0</span>);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h4 id="poj-2728-Desert-king"><a href="#poj-2728-Desert-king" class="headerlink" title="poj 2728 Desert king"></a><a href="http://poj.org/problem?id=3621" target="_blank" rel="external">poj 2728 Desert king</a></h4><h5 id="做法-1"><a href="#做法-1" class="headerlink" title="做法"></a>做法</h5><p>　　这实际上是一个最优比例生成树问题.解法和一般的模型相似, 将边权变为$c_i=a_i-d\cdot b_i$, 求出的最小生成树为答案.</p>
<h4 id="poj3621-Sightseeing-Cows"><a href="#poj3621-Sightseeing-Cows" class="headerlink" title="poj3621 Sightseeing Cows"></a><a href="http://poj.org/problem?id=3621" target="_blank" rel="external">poj3621 Sightseeing Cows</a></h4><p>　　给出一个有L个点P条边的有向图，每个点上有点权F，每条边上有边权T。<br>求一个回路使$\frac{∑F_i}{∑T_i}$最大.</p>
<h5 id="做法-2"><a href="#做法-2" class="headerlink" title="做法"></a>做法</h5><p>　　观察到一个环上边的数量和点的数量相同, 一条边的边权视为其花费, 其入点的点权视为是边的收入, 这样还是转化为了同样的模型, 二分建图, 转化为是否存在正环, 可以转化为判定负环.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/03/17/Scoreplanning/" data-id="cjftq8ntw000he0keu70qgxnj" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/分数规划/">分数规划</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/动态规划/">动态规划</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-sbxbdsyhdp" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/03/17/sbxbdsyhdp/" class="article-date">
  <time datetime="2018-03-17T02:32:12.000Z" itemprop="datePublished">2018-03-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/信息学竞赛/">信息学竞赛</a>►<a class="article-category-link" href="/categories/信息学竞赛/总结/">总结</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/03/17/sbxbdsyhdp/">四边形不等式优化</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <ul>
<li>内容来自<a href="https://wenku.baidu.com/view/c44cd84733687e21af45a906.html" target="_blank" rel="external">动态规划加速原理之四边形不等式</a>,华中师大一附中 赵爽.</li>
</ul>
<h4 id="四边形不等式"><a href="#四边形不等式" class="headerlink" title="四边形不等式:"></a>四边形不等式:</h4><p>　　在动态规划问题中，有一个常见的状态转移方程$f(i,j)=\min{f(i,k)+f(k+1,j)}+w(i,j)$(<strong><em>$(1)$</em></strong>), 若对于$i\leq i’\leq j\leq j’$都有$w(i,j’)\ge w(j’,i)$, 则称$w$其满足区间包含的单调性.若有$$w(i,j)+w(i’,j’)\leq w(i’,j)+w(i,j’)$$则称$w$满足四边形不等式.</p>
<h4 id="定理一"><a href="#定理一" class="headerlink" title="定理一:"></a>定理一:</h4><p>　　若函数$w$既满足区间包含的单调性有满足四边形不等式, 则函数$f$也满足四边形不等式.</p>
<h4 id="定理二"><a href="#定理二" class="headerlink" title="定理二:"></a>定理二:</h4><p>　　定义$s(i,j)$为函数$f(i,j)$对应的决策变量的最大值.则<br>$$s(i,j)=\max_{i\leq k\leq j}{f(i,j)=w(i,j)+f(i,k-1)+f(k,j)}.$$</p>
<p>　　若$f(i,j)$满足四边形不等式, 那么$s(i,j)$单调.即<br>$$s(i,j)\leq s(i,j+1)\leq s(i+1,j+1)$$.</p>
<h4 id="优化"><a href="#优化" class="headerlink" title="优化:"></a>优化:</h4><p>　　证明了$f(i,j)$取得最优值时的决策变量$s(i,j)$具有单调性之后, 可以发现$s(i,j-1)\leq s(i,j)\leq s(i+1,j)$.因此转移方程<strong><em>$(1)$</em></strong>等价于:<br>$$<br>f(i,j)=\min_{s(i,j-1)\leq k\leq s(i+1,j)}{f(i,k-1)+f(k,j)+w(i,j)}<br>$$<br>在实际动态规划的过程中, 在求$f(i,j)$时, $s(i+1,j)$和$s(i,j-1)$必定已经求出, 因此可以缩小$k$的枚举范围从而减少运算量.<br>　　这样时间复杂度就从$O(n^3)$变为了$O(n^2)$.</p>
<h4 id="例题"><a href="#例题" class="headerlink" title="例题"></a>例题</h4><p><a href="http://codevs.cn/problem/3002/" target="_blank" rel="external">CodeVs 3002</a><br>关于石子合并问题一种更加优秀的解法<a href="http://blog.csdn.net/u011328276/article/details/9669531" target="_blank" rel="external">poj1738 An old Stone Game 石子合并(归并) GarsiaWachs算法</a></p>
<h5 id="题目描述-Description"><a href="#题目描述-Description" class="headerlink" title="题目描述 Description"></a>题目描述 Description</h5><p>有n堆石子排成一列，每堆石子有一个重量w[i], 每次合并可以合并相邻的两堆石子，一次合并的代价为两堆石子的重量和w[i]+w[i+1]。问安排怎样的合并顺序，能够使得总合并代价达到最小。</p>
<h5 id="输入描述-Input-Description"><a href="#输入描述-Input-Description" class="headerlink" title="输入描述 Input Description"></a>输入描述 Input Description</h5><p>第一行一个整数n（n&lt;=3000）</p>
<p>第二行n个整数w1,w2…wn  (wi &lt;= 3000)</p>
<h5 id="输出描述-Output-Description"><a href="#输出描述-Output-Description" class="headerlink" title="输出描述 Output Description"></a>输出描述 Output Description</h5><p>一个整数表示最小合并代价</p>
<h5 id="样例输入-Sample-Input"><a href="#样例输入-Sample-Input" class="headerlink" title="样例输入 Sample Input"></a>样例输入 Sample Input</h5><p>4</p>
<p>4 1 1 4</p>
<h5 id="样例输出-Sample-Output"><a href="#样例输出-Sample-Output" class="headerlink" title="样例输出 Sample Output"></a>样例输出 Sample Output</h5><p>18</p>
<h5 id="数据范围及提示-Data-Size-amp-Hint"><a href="#数据范围及提示-Data-Size-amp-Hint" class="headerlink" title="数据范围及提示 Data Size &amp; Hint"></a>数据范围及提示 Data Size &amp; Hint</h5><p>数据范围相比“石子归并” 扩大了</p>
<h5 id="分类标签-Tags"><a href="#分类标签-Tags" class="headerlink" title="分类标签 Tags"></a>分类标签 Tags</h5><p>动态规划 区间型DP 单调性DP</p>
<h5 id="做法"><a href="#做法" class="headerlink" title="做法"></a>做法</h5><p>状态转移方程同上,<br>$$<br>f(i,j)=\min_{s(i,j-1)\leq k\leq s(i+1,j)}{f(i,k-1)+f(k,j)+w(i,j)}<br>$$</p>
<h5 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> N 3005</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> inf 0x3f3f3f3f</span></div><div class="line"></div><div class="line"><span class="keyword">int</span> f[N][N];</div><div class="line"><span class="keyword">int</span> s[N][N];</div><div class="line"><span class="keyword">int</span> sum[N];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="keyword">int</span> n;<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;sum[i]);</div><div class="line">		sum[i]+=sum[i<span class="number">-1</span>];</div><div class="line">	&#125;<span class="keyword">int</span> j;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)s[i][i]=i;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> l=<span class="number">1</span>;l&lt;=n;++l)</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</div><div class="line">			<span class="keyword">if</span>(l+i&gt;n)<span class="keyword">break</span>;j=l+i;</div><div class="line">			<span class="keyword">if</span>(i!=j)f[i][j]=inf;</div><div class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> k=s[i][j<span class="number">-1</span>];k&lt;=s[i+<span class="number">1</span>][j];++k)</div><div class="line">				<span class="keyword">if</span>(f[i][k<span class="number">-1</span>]+f[k][j]&lt;f[i][j])&#123;</div><div class="line">					f[i][j]=f[i][k<span class="number">-1</span>]+f[k][j];</div><div class="line">					s[i][j]=k;</div><div class="line">				&#125;</div><div class="line">			f[i][j]+=sum[j]-sum[i<span class="number">-1</span>];</div><div class="line">		&#125;</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"%d"</span>,f[<span class="number">1</span>][n]);</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="HDU-3516-Tree-Construction"><a href="#HDU-3516-Tree-Construction" class="headerlink" title="HDU 3516 Tree Construction"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=3516" target="_blank" rel="external">HDU 3516 Tree Construction</a></h4><h5 id="题意"><a href="#题意" class="headerlink" title="题意"></a>题意</h5><p>　　给出一些点满足$x_i<x_j,y_i>y_j,i&lt; j$.连接两个点$(x_u,y_u),(x_v,y_v)$的代价为$x_v-x_u+y_u-y_v$.求将所有点连起来的最小代价.</x_j,y_i></p>
<h5 id="做法-1"><a href="#做法-1" class="headerlink" title="做法:"></a>做法:</h5><p>　　大概很少人会想到这是一个四边形不等式优化区间dp吧.<br>　　根据转移方程,<br>$$<br>f(i,j)=\min{f(i,k)+f(k+1,j)}+w(i,j,k)<br>$$<br>$w(i,j,k)$将$(i,k-1)$和$(k,i)$通过$(k-1,k)$连接起来的代价.<br>$$<br>w(i,j,k)=x_k-x_{k-1}+y_{k-1}-y_k<br>$$<br>　　或许可以直接证明$f$满足四边形不等式, 或许也可以证明$w$同样满足四边形不等式.直接证$f$需要<em>按照大区间的构造方案构造小区间的构造方案</em>.</p>
<ul>
<li><a href="https://www.cnblogs.com/iwtwiioi/p/4323351.html" target="_blank" rel="external">iwtwiioi’s blog</a><h5 id="Code-1"><a href="#Code-1" class="headerlink" title="Code"></a>Code</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> N 1005</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> inf 0x3f3f3f3f</span></div><div class="line"></div><div class="line"><span class="keyword">int</span> f[N][N];</div><div class="line"><span class="keyword">int</span> s[N][N];</div><div class="line"><span class="keyword">int</span> x[N],y[N];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">cost</span><span class="params">(<span class="keyword">int</span> i,<span class="keyword">int</span> j,<span class="keyword">int</span> k)</span></span>&#123;</div><div class="line">    <span class="keyword">return</span> y[k<span class="number">-1</span>]-y[j]+x[k]-x[i];</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="keyword">int</span> n;</div><div class="line">	<span class="keyword">while</span>(~<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n))&#123;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)</div><div class="line">			<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;x[i],&amp;y[i]);<span class="keyword">int</span> j;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)s[i][i]=i,f[i][i]=<span class="number">0</span>;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> l=<span class="number">1</span>;l&lt;=n;++l)</div><div class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</div><div class="line">				<span class="keyword">if</span>(l+i&gt;n)<span class="keyword">break</span>;j=l+i;</div><div class="line">				f[i][j]=inf;</div><div class="line">				<span class="keyword">for</span>(<span class="keyword">int</span> k=s[i][j<span class="number">-1</span>];k&lt;=s[i+<span class="number">1</span>][j];++k)&#123;</div><div class="line">					<span class="keyword">if</span>(f[i][k<span class="number">-1</span>]+f[k][j]+cost(i,j,k)&lt;f[i][j])&#123;</div><div class="line">						f[i][j]=f[i][k<span class="number">-1</span>]+f[k][j]+cost(i,j,k);</div><div class="line">						s[i][j]=k;</div><div class="line">					&#125;</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">		<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,f[<span class="number">1</span>][n]);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/03/17/sbxbdsyhdp/" data-id="cjftq8ny6007pe0ke3glpmmdg" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/动态规划/">动态规划</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/区间dp/">区间dp</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/四边形不等式优化/">四边形不等式优化</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-GraphExercise1" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/03/13/GraphExercise1/" class="article-date">
  <time datetime="2018-03-13T10:55:51.000Z" itemprop="datePublished">2018-03-13</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/信息学竞赛/">信息学竞赛</a>►<a class="article-category-link" href="/categories/信息学竞赛/题目/">题目</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/03/13/GraphExercise1/">图论题目</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="最短负环"><a href="#最短负环" class="headerlink" title="最短负环"></a>最短负环</h3><p>　　给定一张n个点的有向有边权图，求它的长度最短的负环或输出无解。n&lt;=100<br>　　<em>并没有找到原题面和提交地址, 但是仅仅是思路也是可以的.</em></p>
<h4 id="做法"><a href="#做法" class="headerlink" title="做法"></a>做法</h4><p>　　目前判断负环并没有什么很好的办法, 一般做法是SPFA判断.<br>　　用$f(i,u,v)$表示从$u$走到$v$不超过$i$条边的最短路.那么负环就是对于某个$u$使得$f(i,u,u)&lt;0$, 那么对于在$i$取得值$i_{min}$时为最短负环.<br>　　需要快速合并$f(i,u,v)$和$f(j,u,v)$, 合并方法类似于Folyd, 一次合并复杂度为$O(n^3)$, 可以使用倍增, 总复杂度为$O(n^3\log n)$.</p>
<h3 id="BZOJ-4727-POI2017-Turysta"><a href="#BZOJ-4727-POI2017-Turysta" class="headerlink" title="BZOJ 4727: POI2017 Turysta"></a><a href="http://www.lydsy.com/JudgeOnline/problem.php?id=4727" target="_blank" rel="external">BZOJ 4727: POI2017 Turysta</a></h3><p>　　给出一个n个点的有向图，任意两个点之间有且仅一条有向边。对于每个点v，求出从v出发的一条经过点数最多，且没有重复经过同一个点一次以上的简单路径.n&lt;=2000</p>
<h4 id="做法-1"><a href="#做法-1" class="headerlink" title="做法"></a>做法</h4><p>　　可以证明竞赛图(任意两点之间都有且只有一条有向路径)一定存在哈密顿路径, 强联通竞赛图一定存在哈密顿回路, 所以可以将原图缩点, 缩完点的图上的每个点都是一个哈密顿回路, 所以在缩完点的DAG上做DP就好了.</p>
<h3 id="CodeForces-542-E-Playing-on-Graph"><a href="#CodeForces-542-E-Playing-on-Graph" class="headerlink" title="CodeForces 542 E. Playing on Graph"></a><a href="http://codeforces.com/problemset/problem/542/E" target="_blank" rel="external">CodeForces 542 E. Playing on Graph</a></h3><p>　　在一张图上每次选择两个没有边相连的点将其合并, 最后图会变成一条链, 最大化链的长度或者是无解.</p>
<h4 id="做法-2"><a href="#做法-2" class="headerlink" title="做法"></a>做法</h4><ul>
<li>可以发现当图中存在奇环的时候无解, 因为对其操作会同样产生一个奇环最后会得到一个三元环.所以有解的图必定是一个二分图</li>
<li>那么这个图必定是有若干个二分图组成.这若干个二分图的答案可以分别考虑然后相加.</li>
<li>结论是一个二分图合并出的最大答案是图的直径.可以这么构造:<br>　　将图的任意一个点作为链的起点.然后将到达它距离相等的点(经过相同条边的点)缩成一个点(他们必定是缩成一个点而不是一条链), 用$d_i$表示到达这个点的距离, 这样会缩出$\max{d_i},i\leq n$个点, 这些点连成一条长度为$\max{d_i},i\leq n$的链.(<strong>二分图的结构比较特殊, 若一个点到其它点的距离最大值为$d_{\max}$, 则必定存在距离与其距离为$d_{i},i\leq d_{\max}$的点, 并且所有与某一个距离相等的点在二分图的同一侧.</strong>)</li>
</ul>
<h3 id="BZOJ-4298-ONTAK2015-Bajtocja"><a href="#BZOJ-4298-ONTAK2015-Bajtocja" class="headerlink" title="BZOJ.4298.[ONTAK2015]Bajtocja"></a><a href="http://www.lydsy.com/JudgeOnline/problem.php?id=4298" target="_blank" rel="external">BZOJ.4298.[ONTAK2015]Bajtocja</a></h3><p>　　给定d张无向图，每张图都有n个点。一开始，在任何一张图中都没有任何边。接下来有m次操作，每次操作会给出a,b,k，意为在第k张图中的点a和点b之间添加一条无向边。你需要在每次操作之后输出有序数对(a,b)的个数，满足1≤a,b≤n，且a点和b点在d张图中都连通。d&lt;=200，n&lt;=5000，m&lt;=1000000</p>
<h3 id="BZOJ-3495-PA2010-Riddle"><a href="#BZOJ-3495-PA2010-Riddle" class="headerlink" title="BZOJ 3495: PA2010 Riddle"></a><a href="http://www.lydsy.com/JudgeOnline/problem.php?id=3495" target="_blank" rel="external">BZOJ 3495: PA2010 Riddle</a></h3><p>　　有n个点，m条边，k个点集A1…Ak，满足每个点属于且仅属于一个集合。现在要在每个集合中选恰好一个点，使得对于每一条边，两个端点中至少有一个被选择。n,m,k&lt;=1000000</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/03/13/GraphExercise1/" data-id="cjftq8nto0008e0keco0m4by0" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/图论/">图论</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-p3275" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/03/13/p3275/" class="article-date">
  <time datetime="2018-03-13T09:48:28.000Z" itemprop="datePublished">2018-03-13</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/信息学竞赛/">信息学竞赛</a>►<a class="article-category-link" href="/categories/信息学竞赛/题目/">题目</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/03/13/p3275/">P3275 SCOI2011 糖果</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p>幼儿园里有N个小朋友，lxhgww老师现在想要给这些小朋友们分配糖果，要求每个小朋友都要分到糖果。但是小朋友们也有嫉妒心，总是会提出一些要求，比如小明不希望小红分到的糖果比他的多，于是在分配糖果的时候，lxhgww需要满足小朋友们的K个要求。幼儿园的糖果总是有限的，lxhgww想知道他至少需要准备多少个糖果，才能使得每个小朋友都能够分到糖果，并且满足小朋友们所有的要求。</p>
<h3 id="输入输出格式"><a href="#输入输出格式" class="headerlink" title="输入输出格式"></a>输入输出格式</h3><h4 id="输入格式："><a href="#输入格式：" class="headerlink" title="输入格式："></a>输入格式：</h4><p>输入的第一行是两个整数N，K。接下来K行，表示这些点需要满足的关系，每行3个数字，X，A，B。如果X=1， 表示第A个小朋友分到的糖果必须和第B个小朋友分到的糖果一样多；如果X=2， 表示第A个小朋友分到的糖果必须少于第B个小朋友分到的糖果；如果X=3， 表示第A个小朋友分到的糖果必须不少于第B个小朋友分到的糖果；如果X=4， 表示第A个小朋友分到的糖果必须多于第B个小朋友分到的糖果；如果X=5， 表示第A个小朋友分到的糖果必须不多于第B个小朋友分到的糖果；</p>
<h4 id="输出格式："><a href="#输出格式：" class="headerlink" title="输出格式："></a>输出格式：</h4><p>输出一行，表示lxhgww老师至少需要准备的糖果数，如果不能满足小朋友们的所有要求，就输出-1。</p>
<h3 id="输入输出样例"><a href="#输入输出样例" class="headerlink" title="输入输出样例"></a>输入输出样例</h3><h4 id="输入样例-1："><a href="#输入样例-1：" class="headerlink" title="输入样例#1："></a>输入样例#1：</h4><p>5 7<br>1 1 2<br>2 3 2<br>4 4 1<br>3 4 5<br>5 4 5<br>2 3 5<br>4 5 1</p>
<h4 id="输出样例-1："><a href="#输出样例-1：" class="headerlink" title="输出样例#1："></a>输出样例#1：</h4><p>11</p>
<h3 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h3><p>【数据范围】<br>对于30%的数据，保证 N&lt;=100<br>对于100%的数据，保证 N&lt;=100000<br>对于所有的数据，保证 K&lt;=100000，1&lt;=X&lt;=5，1&lt;=A, B&lt;=N</p>
<h3 id="做法"><a href="#做法" class="headerlink" title="做法:"></a>做法:</h3><p>　　根据差分约束的基本做法, 对于每个形如$x_i-x_j\geq k$的式子, 连一条$x_j\rightarrow x_i$长度为$k$的边.对于这个题目, 我们还需要建立一个节点零, 并从其连向其它点, 长度为1, 表示每个人至少需要一颗糖果.最后从零点到每个点的最长路径就是答案, 因为它要满足所有的限制条件, 而最长路是满足这些条件的最小代价.<br>　　但是这道题目还需要一些特殊的技巧, 因为出题人的原因.</p>
<ul>
<li>有一个测试点会将图构建成一条链的形式, 长度为100000的链, 所以需要在连零到每个点长度为1的边时, 需要从n开始连, 因为我们使用的存图方式(<strong><em>类似于链表</em></strong>)会使得最后添加的边第一个被遍历到.</li>
<li>在一开始加边的时候, 如果有这么一条边$x_i\rightarrow x_j$且边权为$1$, 想也知道会出问题, 这种情况下不可能满足要求, 直接输出$-1$即可.</li>
<li>在<strong>spfa</strong>时如果一个点被更新了n次以上就需要跳出, 因为可能无法找出答案.否则会TLE一个测试点.</li>
</ul>
<h3 id="其它做法-优化技巧"><a href="#其它做法-优化技巧" class="headerlink" title="其它做法(优化技巧)."></a>其它做法(优化技巧).</h3><ul>
<li>双端队列spfa可能会有一定优化, 听题解说的.</li>
<li>堆优化Dijkstra可能会快不少.</li>
<li>一种很鬼出的做法: 先添加边权为0的边, 然后缩个点, 环上的点意味着必须相等.然后加上边权为1的边, 如果构成了自环(<strong><em>意味着有两个必须相等的点要求有严格大于关系</em></strong>)就无解.然后再次<strong>拓扑排序</strong>如果有环就无解.</li>
</ul>
<h3 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> N 2000005</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">int</span> head[N],tot;</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">struct</span> Edge&#123;</div><div class="line">    <span class="keyword">int</span> v,c,nxt;</div><div class="line">    Edge()&#123;&#125;</div><div class="line">    Edge(<span class="keyword">int</span> _u,<span class="keyword">int</span> _v,<span class="keyword">int</span> _c)&#123;</div><div class="line">        v=_v,c=_c,nxt=head[_u];head[_u]=tot;</div><div class="line">    &#125;</div><div class="line">&#125;e[N];</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">AddEdge</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v,<span class="keyword">int</span> c)</span></span>&#123;</div><div class="line">    e[++tot]=Edge(u,v,c);</div><div class="line">&#125;</div><div class="line"><span class="keyword">int</span> n,m;</div><div class="line"><span class="keyword">int</span> dis[N];</div><div class="line"><span class="keyword">int</span> vis[N];</div><div class="line"><span class="keyword">int</span> inq[N];</div><div class="line"><span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt;que;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">spfa</span><span class="params">()</span></span>&#123;</div><div class="line">    dis[<span class="number">0</span>]=<span class="number">0</span>;que.push(<span class="number">0</span>);vis[<span class="number">0</span>]=<span class="number">1</span>;inq[<span class="number">0</span>]=<span class="number">1</span>;</div><div class="line">    <span class="keyword">register</span> <span class="keyword">int</span> to,top;</div><div class="line">    <span class="keyword">while</span>(!que.empty())&#123;</div><div class="line">        top=que.front();vis[top]=<span class="literal">false</span>;que.pop();</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=head[top];i;i=e[i].nxt)&#123;</div><div class="line">            to=e[i].v;</div><div class="line">            <span class="keyword">if</span>(dis[to]&lt;dis[top]+e[i].c)&#123;</div><div class="line">                dis[to]=dis[top]+e[i].c;</div><div class="line">                <span class="keyword">if</span>(++inq[to]&gt;=n)<span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">                <span class="keyword">if</span>(!vis[to])&#123;</div><div class="line">                    vis[to]=<span class="literal">true</span>;</div><div class="line">                    que.push(to);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">main()&#123;</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;m);</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;++i)&#123;</div><div class="line">        <span class="keyword">int</span> a,b,c;</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;a,&amp;b,&amp;c);</div><div class="line">        <span class="keyword">if</span>(b==c)&#123;</div><div class="line">            <span class="keyword">if</span>(a==<span class="number">2</span>)&#123;</div><div class="line">                <span class="built_in">printf</span>(<span class="string">"-1\n"</span>);</div><div class="line">                <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(a==<span class="number">4</span>)&#123;</div><div class="line">                <span class="built_in">printf</span>(<span class="string">"-1\n"</span>);</div><div class="line">                <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span>(a==<span class="number">1</span>)&#123;</div><div class="line">            AddEdge(b,c,<span class="number">0</span>);</div><div class="line">            AddEdge(c,b,<span class="number">0</span>);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(a==<span class="number">2</span>)AddEdge(b,c,<span class="number">1</span>);</div><div class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(a==<span class="number">3</span>)AddEdge(c,b,<span class="number">0</span>);</div><div class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(a==<span class="number">4</span>)AddEdge(c,b,<span class="number">1</span>);</div><div class="line">        <span class="keyword">else</span> AddEdge(b,c,<span class="number">0</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=n;i&gt;=<span class="number">1</span>;--i)</div><div class="line">        AddEdge(<span class="number">0</span>,i,<span class="number">1</span>);</div><div class="line">    <span class="keyword">if</span>(!spfa())&#123;</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"-1\n"</span>);</div><div class="line">        <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">long</span> <span class="keyword">long</span> ans=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</div><div class="line">        ans+=(<span class="keyword">long</span> <span class="keyword">long</span>)dis[i];</div><div class="line">        <span class="comment">// cout&lt;&lt;dis[i]&lt;&lt;' ';</span></div><div class="line">    &#125;</div><div class="line">    <span class="built_in">printf</span>(<span class="string">"%lld"</span>,ans);</div><div class="line">    <span class="comment">// system("pause");</span></div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/03/13/p3275/" data-id="cjftq8nxq006he0kehg9ediya" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/差分约束/">差分约束</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/最短路/">最短路</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-system-of-difference-constraints" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/03/11/system-of-difference-constraints/" class="article-date">
  <time datetime="2018-03-11T09:53:40.000Z" itemprop="datePublished">2018-03-11</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/信息学竞赛/">信息学竞赛</a>►<a class="article-category-link" href="/categories/信息学竞赛/题目/">题目</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/03/11/system-of-difference-constraints/">差分约束系统</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="解法"><a href="#解法" class="headerlink" title="解法"></a>解法</h2><p>　　求解差分约束系统，可以转化成图论的单源最短路径（或最长路径）问题。<br>　　观察xj-xi&lt;=bk，会发现它类似最短路中的三角不等式$d_v\leq d_u+w{u,v}$，即$d_v-d_u\leq w{u,v,1}$。因此，以每个变量$x_i$为结点，对于约束条件$x_j-x_i\leq b_k$，连接一条边$(i,j)$，边权为$b_k$。我们再增加一个源点s,s与所有定点相连，边权均为0。对这个图，以s为源点运行Bellman-ford算法（或SPFA算法），最终{$d_i$}即为一组可行解。<br>————百度百科</p>
<h2 id="例题-Luogu-P3275-SCOI2011-糖果"><a href="#例题-Luogu-P3275-SCOI2011-糖果" class="headerlink" title="例题:Luogu P3275 [SCOI2011]糖果"></a>例题:<a href="https://www.luogu.org/problemnew/show/P3275" target="_blank" rel="external">Luogu P3275 [SCOI2011]糖果</a></h2><h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p>幼儿园里有N个小朋友，lxhgww老师现在想要给这些小朋友们分配糖果，要求每个小朋友都要分到糖果。但是小朋友们也有嫉妒心，总是会提出一些要求，比如小明不希望小红分到的糖果比他的多，于是在分配糖果的时候，lxhgww需要满足小朋友们的K个要求。幼儿园的糖果总是有限的，lxhgww想知道他至少需要准备多少个糖果，才能使得每个小朋友都能够分到糖果，并且满足小朋友们所有的要求。</p>
<h3 id="输入输出格式"><a href="#输入输出格式" class="headerlink" title="输入输出格式"></a>输入输出格式</h3><h4 id="输入格式："><a href="#输入格式：" class="headerlink" title="输入格式："></a>输入格式：</h4><p>输入的第一行是两个整数N，K。接下来K行，表示这些点需要满足的关系，每行3个数字，X，A，B。如果X=1， 表示第A个小朋友分到的糖果必须和第B个小朋友分到的糖果一样多；如果X=2， 表示第A个小朋友分到的糖果必须少于第B个小朋友分到的糖果；如果X=3， 表示第A个小朋友分到的糖果必须不少于第B个小朋友分到的糖果；如果X=4， 表示第A个小朋友分到的糖果必须多于第B个小朋友分到的糖果；如果X=5， 表示第A个小朋友分到的糖果必须不多于第B个小朋友分到的糖果；</p>
<h4 id="输出格式："><a href="#输出格式：" class="headerlink" title="输出格式："></a>输出格式：</h4><p>输出一行，表示lxhgww老师至少需要准备的糖果数，如果不能满足小朋友们的所有要求，就输出-1。</p>
<h3 id="输入输出样例"><a href="#输入输出样例" class="headerlink" title="输入输出样例"></a>输入输出样例</h3><h4 id="输入样例-1："><a href="#输入样例-1：" class="headerlink" title="输入样例#1："></a>输入样例#1：</h4><p>5 7<br>1 1 2<br>2 3 2<br>4 4 1<br>3 4 5<br>5 4 5<br>2 3 5<br>4 5 1</p>
<h4 id="输出样例-1："><a href="#输出样例-1：" class="headerlink" title="输出样例#1："></a>输出样例#1：</h4><p>11</p>
<h3 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h3><p>【数据范围】<br>对于30%的数据，保证 N&lt;=100<br>对于100%的数据，保证 N&lt;=100000<br>对于所有的数据，保证 K&lt;=100000，1&lt;=X&lt;=5，1&lt;=A, B&lt;=N</p>
<h3 id="做法"><a href="#做法" class="headerlink" title="做法:"></a>做法:</h3><p>　　根据差分约束的基本做法, 对于每个形如$x_i-x_j\geq k$的式子, 连一条$x_j\rightarrow x_i$长度为$k$的边.对于这个题目, 我们还需要建立一个节点零, 并从其连向其它点, 长度为1, 表示每个人至少需要一颗糖果.最后从零点到每个点的最长路径就是答案, 因为它要满足所有的限制条件, 而最长路是满足这些条件的最小代价.<br>　　但是这道题目还需要一些特殊的技巧, 因为出题人的原因.</p>
<ul>
<li>有一个测试点会将图构建成一条链的形式, 长度为100000的链, 所以需要在连零到每个点长度为1的边时, 需要从n开始连, 因为我们使用的存图方式(<strong><em>类似于链表</em></strong>)会使得最后添加的边第一个被遍历到.</li>
<li>在一开始加边的时候, 如果有这么一条边$x_i\rightarrow x_j$且边权为$1$, 想也知道会出问题, 这种情况下不可能满足要求, 直接输出$-1$即可.</li>
<li>在<strong>spfa</strong>时如果一个点被更新了n次以上就需要跳出, 因为可能无法找出答案.否则会TLE一个测试点.</li>
</ul>
<h3 id="其它做法-优化技巧"><a href="#其它做法-优化技巧" class="headerlink" title="其它做法(优化技巧)."></a>其它做法(优化技巧).</h3><ul>
<li>双端队列spfa可能会有一定优化, 听题解说的.</li>
<li>堆优化Dijkstra可能会快不少.</li>
<li>一种很鬼出的做法: 先添加边权为0的边, 然后缩个点, 环上的点意味着必须相等.然后加上边权为1的边, 如果构成了自环(<strong><em>意味着有两个必须相等的点要求有严格大于关系</em></strong>)就无解.然后再次<strong>拓扑排序</strong>如果有环就无解.</li>
</ul>
<h3 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> N 2000005</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">int</span> head[N],tot;</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">struct</span> Edge&#123;</div><div class="line">    <span class="keyword">int</span> v,c,nxt;</div><div class="line">    Edge()&#123;&#125;</div><div class="line">    Edge(<span class="keyword">int</span> _u,<span class="keyword">int</span> _v,<span class="keyword">int</span> _c)&#123;</div><div class="line">        v=_v,c=_c,nxt=head[_u];head[_u]=tot;</div><div class="line">    &#125;</div><div class="line">&#125;e[N];</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">AddEdge</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v,<span class="keyword">int</span> c)</span></span>&#123;</div><div class="line">    e[++tot]=Edge(u,v,c);</div><div class="line">&#125;</div><div class="line"><span class="keyword">int</span> n,m;</div><div class="line"><span class="keyword">int</span> dis[N];</div><div class="line"><span class="keyword">int</span> vis[N];</div><div class="line"><span class="keyword">int</span> inq[N];</div><div class="line"><span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt;que;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">spfa</span><span class="params">()</span></span>&#123;</div><div class="line">    dis[<span class="number">0</span>]=<span class="number">0</span>;que.push(<span class="number">0</span>);vis[<span class="number">0</span>]=<span class="number">1</span>;inq[<span class="number">0</span>]=<span class="number">1</span>;</div><div class="line">    <span class="keyword">register</span> <span class="keyword">int</span> to,top;</div><div class="line">    <span class="keyword">while</span>(!que.empty())&#123;</div><div class="line">        top=que.front();vis[top]=<span class="literal">false</span>;que.pop();</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=head[top];i;i=e[i].nxt)&#123;</div><div class="line">            to=e[i].v;</div><div class="line">            <span class="keyword">if</span>(dis[to]&lt;dis[top]+e[i].c)&#123;</div><div class="line">                dis[to]=dis[top]+e[i].c;</div><div class="line">                <span class="keyword">if</span>(++inq[to]&gt;=n)<span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">                <span class="keyword">if</span>(!vis[to])&#123;</div><div class="line">                    vis[to]=<span class="literal">true</span>;</div><div class="line">                    que.push(to);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">main()&#123;</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;m);</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;++i)&#123;</div><div class="line">        <span class="keyword">int</span> a,b,c;</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;a,&amp;b,&amp;c);</div><div class="line">        <span class="keyword">if</span>(b==c)&#123;</div><div class="line">            <span class="keyword">if</span>(a==<span class="number">2</span>)&#123;</div><div class="line">                <span class="built_in">printf</span>(<span class="string">"-1\n"</span>);</div><div class="line">                <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(a==<span class="number">4</span>)&#123;</div><div class="line">                <span class="built_in">printf</span>(<span class="string">"-1\n"</span>);</div><div class="line">                <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span>(a==<span class="number">1</span>)&#123;</div><div class="line">            AddEdge(b,c,<span class="number">0</span>);</div><div class="line">            AddEdge(c,b,<span class="number">0</span>);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(a==<span class="number">2</span>)AddEdge(b,c,<span class="number">1</span>);</div><div class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(a==<span class="number">3</span>)AddEdge(c,b,<span class="number">0</span>);</div><div class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(a==<span class="number">4</span>)AddEdge(c,b,<span class="number">1</span>);</div><div class="line">        <span class="keyword">else</span> AddEdge(b,c,<span class="number">0</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=n;i&gt;=<span class="number">1</span>;--i)</div><div class="line">        AddEdge(<span class="number">0</span>,i,<span class="number">1</span>);</div><div class="line">    <span class="keyword">if</span>(!spfa())&#123;</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"-1\n"</span>);</div><div class="line">        <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">long</span> <span class="keyword">long</span> ans=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</div><div class="line">        ans+=(<span class="keyword">long</span> <span class="keyword">long</span>)dis[i];</div><div class="line">        <span class="comment">// cout&lt;&lt;dis[i]&lt;&lt;' ';</span></div><div class="line">    &#125;</div><div class="line">    <span class="built_in">printf</span>(<span class="string">"%lld"</span>,ans);</div><div class="line">    <span class="comment">// system("pause");</span></div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/03/11/system-of-difference-constraints/" data-id="cjftq8nym008fe0ke1ioa25ih" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/差分约束/">差分约束</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <a class="extend prev" rel="prev" href="/page/2/">&laquo; __('prev')</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/11/">11</a><a class="extend next" rel="next" href="/page/4/">__('next') &raquo;</a>
  </nav>
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/信息学竞赛/">信息学竞赛</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/信息学竞赛/其它/">其它</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/信息学竞赛/总结/">总结</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/信息学竞赛/我的文档/">我的文档</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/信息学竞赛/考试/">考试</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/信息学竞赛/题目/">题目</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/信息学竞赛/题目/模板/">模板</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/其它/">其它</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/数学/">数学</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/数学/线性代数/">线性代数</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/解决方案/">解决方案</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/解决方案/Hexo/">Hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/解决方案/LaTeX/">LaTeX</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/解决方案/VSCode/">VSCode</a></li></ul></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/2-SAT/">2-SAT</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Anti-SG/">Anti-SG</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Beatty定理/">Beatty定理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CDQ分治/">CDQ分治</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CodeForces/">CodeForces</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Debug/">Debug</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Every-SG/">Every-SG</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Floyd/">Floyd</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hexo/">Hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ICG/">ICG</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LaTeX/">LaTeX</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Lasker-s-Nim/">Lasker's Nim</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Link-Cut-Tree/">Link-Cut-Tree</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Matrix-Tree/">Matrix-Tree</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Misere-Games/">Misère Games</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Multi-SG/">Multi-SG</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NOIP/">NOIP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/">Python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SDOI/">SDOI</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SG函数/">SG函数</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Tarjan/">Tarjan</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TikZ/">TikZ</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Trie/">Trie</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Zeckendorf定理/">Zeckendorf定理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bfs/">bfs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/copyright/">copyright</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/document/">document</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lca/">lca</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nim/">nim</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pb-ds/">pb_ds</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pdf/">pdf</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/source/">source</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/with-draw/">with draw</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/一堆简单题/">一堆简单题</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/三维偏序/">三维偏序</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/二分/">二分</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/二分答案/">二分答案</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/二维前缀和/">二维前缀和</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/二维线段树/">二维线段树</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/二进制拆分/">二进制拆分</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/位运算/">位运算</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/倍增/">倍增</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/内存池/">内存池</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/决策单调性/">决策单调性</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/分块/">分块</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/分数规划/">分数规划</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/前缀和/">前缀和</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/动态规划/">动态规划</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/区间dp/">区间dp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/单调栈/">单调栈</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/单调队列/">单调队列</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/博弈论/">博弈论</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/后缀数组/">后缀数组</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/四边形不等式优化/">四边形不等式优化</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/回文串/">回文串</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/图论/">图论</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/基环树/">基环树</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/堆优化Dijkstra/">堆优化Dijkstra</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/多重标记/">多重标记</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/多重背包/">多重背包</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/威佐夫博弈/">威佐夫博弈</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/字符串/">字符串</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/差分约束/">差分约束</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/巴什博弈/">巴什博弈</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/带权并查集/">带权并查集</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/平衡树/">平衡树</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/并查集/">并查集</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/异或/">异或</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/强制在线/">强制在线</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/强联通分量/">强联通分量</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/归并排序/">归并排序</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/快速幂/">快速幂</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/打表/">打表</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/扩展欧几里得/">扩展欧几里得</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/拆点/">拆点</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/拓扑排序/">拓扑排序</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/指针/">指针</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/排列组合/">排列组合</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/搜索/">搜索</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数学/">数学</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数论/">数论</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/斐波那契博弈/">斐波那契博弈</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/斐波那契数列/">斐波那契数列</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/斜率优化/">斜率优化</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/无限/">无限</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/最大公约数/">最大公约数</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/最大流/">最大流</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/最小生成树/">最小生成树</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/最短路/">最短路</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/最长上升子序列/">最长上升子序列</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/最长公共子序列/">最长公共子序列</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/构造/">构造</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/查分/">查分</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/树/">树</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/树形dp/">树形dp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/树状数组/">树状数组</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/模拟/">模拟</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/模板/">模板</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/欧拉函数/">欧拉函数</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/测试/">测试</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/版权信息/">版权信息</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/生成树/">生成树</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/矩阵快速幂/">矩阵快速幂</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/秦九韶算法/">秦九韶算法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/等差数列/">等差数列</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/线性代数/">线性代数</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/线段树/">线段树</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/网络流/">网络流</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/考试/">考试</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/背包/">背包</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/艺术/">艺术</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/莫比乌斯反演/">莫比乌斯反演</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/规律/">规律</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/解决方案/">解决方案</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/计划/">计划</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/贪心/">贪心</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/逆元/">逆元</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/逆序对/">逆序对</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/错位排列数/">错位排列数</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/题目/">题目</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/高精/">高精</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/2-SAT/" style="font-size: 10px;">2-SAT</a> <a href="/tags/Anti-SG/" style="font-size: 10px;">Anti-SG</a> <a href="/tags/Beatty定理/" style="font-size: 11.25px;">Beatty定理</a> <a href="/tags/CDQ分治/" style="font-size: 10px;">CDQ分治</a> <a href="/tags/CodeForces/" style="font-size: 10px;">CodeForces</a> <a href="/tags/Debug/" style="font-size: 10px;">Debug</a> <a href="/tags/Every-SG/" style="font-size: 10px;">Every-SG</a> <a href="/tags/Floyd/" style="font-size: 10px;">Floyd</a> <a href="/tags/Hexo/" style="font-size: 12.5px;">Hexo</a> <a href="/tags/ICG/" style="font-size: 11.25px;">ICG</a> <a href="/tags/LaTeX/" style="font-size: 10px;">LaTeX</a> <a href="/tags/Lasker-s-Nim/" style="font-size: 10px;">Lasker's Nim</a> <a href="/tags/Link-Cut-Tree/" style="font-size: 10px;">Link-Cut-Tree</a> <a href="/tags/Matrix-Tree/" style="font-size: 10px;">Matrix-Tree</a> <a href="/tags/Misere-Games/" style="font-size: 10px;">Misère Games</a> <a href="/tags/Multi-SG/" style="font-size: 11.25px;">Multi-SG</a> <a href="/tags/NOIP/" style="font-size: 17.5px;">NOIP</a> <a href="/tags/Python/" style="font-size: 11.25px;">Python</a> <a href="/tags/SDOI/" style="font-size: 10px;">SDOI</a> <a href="/tags/SG函数/" style="font-size: 10px;">SG函数</a> <a href="/tags/Tarjan/" style="font-size: 10px;">Tarjan</a> <a href="/tags/TikZ/" style="font-size: 10px;">TikZ</a> <a href="/tags/Trie/" style="font-size: 12.5px;">Trie</a> <a href="/tags/Zeckendorf定理/" style="font-size: 10px;">Zeckendorf定理</a> <a href="/tags/bfs/" style="font-size: 10px;">bfs</a> <a href="/tags/copyright/" style="font-size: 10px;">copyright</a> <a href="/tags/document/" style="font-size: 12.5px;">document</a> <a href="/tags/lca/" style="font-size: 10px;">lca</a> <a href="/tags/nim/" style="font-size: 11.25px;">nim</a> <a href="/tags/pb-ds/" style="font-size: 10px;">pb_ds</a> <a href="/tags/pdf/" style="font-size: 16.25px;">pdf</a> <a href="/tags/source/" style="font-size: 10px;">source</a> <a href="/tags/with-draw/" style="font-size: 11.25px;">with draw</a> <a href="/tags/一堆简单题/" style="font-size: 10px;">一堆简单题</a> <a href="/tags/三维偏序/" style="font-size: 10px;">三维偏序</a> <a href="/tags/二分/" style="font-size: 10px;">二分</a> <a href="/tags/二分答案/" style="font-size: 11.25px;">二分答案</a> <a href="/tags/二维前缀和/" style="font-size: 10px;">二维前缀和</a> <a href="/tags/二维线段树/" style="font-size: 10px;">二维线段树</a> <a href="/tags/二进制拆分/" style="font-size: 10px;">二进制拆分</a> <a href="/tags/位运算/" style="font-size: 10px;">位运算</a> <a href="/tags/倍增/" style="font-size: 13.75px;">倍增</a> <a href="/tags/内存池/" style="font-size: 11.25px;">内存池</a> <a href="/tags/决策单调性/" style="font-size: 10px;">决策单调性</a> <a href="/tags/分块/" style="font-size: 11.25px;">分块</a> <a href="/tags/分数规划/" style="font-size: 11.25px;">分数规划</a> <a href="/tags/前缀和/" style="font-size: 10px;">前缀和</a> <a href="/tags/动态规划/" style="font-size: 20px;">动态规划</a> <a href="/tags/区间dp/" style="font-size: 10px;">区间dp</a> <a href="/tags/单调栈/" style="font-size: 10px;">单调栈</a> <a href="/tags/单调队列/" style="font-size: 11.25px;">单调队列</a> <a href="/tags/博弈论/" style="font-size: 18.75px;">博弈论</a> <a href="/tags/后缀数组/" style="font-size: 11.25px;">后缀数组</a> <a href="/tags/四边形不等式优化/" style="font-size: 10px;">四边形不等式优化</a> <a href="/tags/回文串/" style="font-size: 10px;">回文串</a> <a href="/tags/图论/" style="font-size: 13.75px;">图论</a> <a href="/tags/基环树/" style="font-size: 10px;">基环树</a> <a href="/tags/堆优化Dijkstra/" style="font-size: 10px;">堆优化Dijkstra</a> <a href="/tags/多重标记/" style="font-size: 10px;">多重标记</a> <a href="/tags/多重背包/" style="font-size: 10px;">多重背包</a> <a href="/tags/威佐夫博弈/" style="font-size: 11.25px;">威佐夫博弈</a> <a href="/tags/字符串/" style="font-size: 15px;">字符串</a> <a href="/tags/差分约束/" style="font-size: 11.25px;">差分约束</a> <a href="/tags/巴什博弈/" style="font-size: 10px;">巴什博弈</a> <a href="/tags/带权并查集/" style="font-size: 10px;">带权并查集</a> <a href="/tags/平衡树/" style="font-size: 11.25px;">平衡树</a> <a href="/tags/并查集/" style="font-size: 10px;">并查集</a> <a href="/tags/异或/" style="font-size: 11.25px;">异或</a> <a href="/tags/强制在线/" style="font-size: 10px;">强制在线</a> <a href="/tags/强联通分量/" style="font-size: 10px;">强联通分量</a> <a href="/tags/归并排序/" style="font-size: 10px;">归并排序</a> <a href="/tags/快速幂/" style="font-size: 10px;">快速幂</a> <a href="/tags/打表/" style="font-size: 10px;">打表</a> <a href="/tags/扩展欧几里得/" style="font-size: 10px;">扩展欧几里得</a> <a href="/tags/拆点/" style="font-size: 10px;">拆点</a> <a href="/tags/拓扑排序/" style="font-size: 10px;">拓扑排序</a> <a href="/tags/指针/" style="font-size: 12.5px;">指针</a> <a href="/tags/排列组合/" style="font-size: 10px;">排列组合</a> <a href="/tags/搜索/" style="font-size: 16.25px;">搜索</a> <a href="/tags/数学/" style="font-size: 10px;">数学</a> <a href="/tags/数论/" style="font-size: 10px;">数论</a> <a href="/tags/斐波那契博弈/" style="font-size: 10px;">斐波那契博弈</a> <a href="/tags/斐波那契数列/" style="font-size: 10px;">斐波那契数列</a> <a href="/tags/斜率优化/" style="font-size: 11.25px;">斜率优化</a> <a href="/tags/无限/" style="font-size: 10px;">无限</a> <a href="/tags/最大公约数/" style="font-size: 10px;">最大公约数</a> <a href="/tags/最大流/" style="font-size: 10px;">最大流</a> <a href="/tags/最小生成树/" style="font-size: 11.25px;">最小生成树</a> <a href="/tags/最短路/" style="font-size: 16.25px;">最短路</a> <a href="/tags/最长上升子序列/" style="font-size: 11.25px;">最长上升子序列</a> <a href="/tags/最长公共子序列/" style="font-size: 10px;">最长公共子序列</a> <a href="/tags/构造/" style="font-size: 11.25px;">构造</a> <a href="/tags/查分/" style="font-size: 10px;">查分</a> <a href="/tags/树/" style="font-size: 10px;">树</a> <a href="/tags/树形dp/" style="font-size: 16.25px;">树形dp</a> <a href="/tags/树状数组/" style="font-size: 11.25px;">树状数组</a> <a href="/tags/模拟/" style="font-size: 17.5px;">模拟</a> <a href="/tags/模板/" style="font-size: 16.25px;">模板</a> <a href="/tags/欧拉函数/" style="font-size: 10px;">欧拉函数</a> <a href="/tags/测试/" style="font-size: 11.25px;">测试</a> <a href="/tags/版权信息/" style="font-size: 10px;">版权信息</a> <a href="/tags/生成树/" style="font-size: 13.75px;">生成树</a> <a href="/tags/矩阵快速幂/" style="font-size: 11.25px;">矩阵快速幂</a> <a href="/tags/秦九韶算法/" style="font-size: 10px;">秦九韶算法</a> <a href="/tags/等差数列/" style="font-size: 10px;">等差数列</a> <a href="/tags/线性代数/" style="font-size: 11.25px;">线性代数</a> <a href="/tags/线段树/" style="font-size: 17.5px;">线段树</a> <a href="/tags/网络流/" style="font-size: 10px;">网络流</a> <a href="/tags/考试/" style="font-size: 10px;">考试</a> <a href="/tags/背包/" style="font-size: 11.25px;">背包</a> <a href="/tags/艺术/" style="font-size: 11.25px;">艺术</a> <a href="/tags/莫比乌斯反演/" style="font-size: 11.25px;">莫比乌斯反演</a> <a href="/tags/规律/" style="font-size: 11.25px;">规律</a> <a href="/tags/解决方案/" style="font-size: 15px;">解决方案</a> <a href="/tags/计划/" style="font-size: 13.75px;">计划</a> <a href="/tags/贪心/" style="font-size: 15px;">贪心</a> <a href="/tags/逆元/" style="font-size: 10px;">逆元</a> <a href="/tags/逆序对/" style="font-size: 10px;">逆序对</a> <a href="/tags/错位排列数/" style="font-size: 10px;">错位排列数</a> <a href="/tags/题目/" style="font-size: 10px;">题目</a> <a href="/tags/高精/" style="font-size: 11.25px;">高精</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/04/10/dphigher/">动态规划题目选做</a>
          </li>
        
          <li>
            <a href="/2018/04/10/dpeasypros/">历年NOIP简单动态规划题目选做</a>
          </li>
        
          <li>
            <a href="/2018/04/07/noip2014d2/">NOIP 2014 Day1</a>
          </li>
        
          <li>
            <a href="/2018/04/07/noip2014d1/">NOIP 2014 Day1</a>
          </li>
        
          <li>
            <a href="/2018/04/06/SuffixArray/">后缀数组</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="/js/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>