<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://yoursite.com/page/5/index.html">
<meta property="og:site_name" content="Hexo">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hexo">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <!--<link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">-->
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-test3-3" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/03/03/test3-3/" class="article-date">
  <time datetime="2018-03-03T12:18:40.000Z" itemprop="datePublished">2018-03-03</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/信息学竞赛/">信息学竞赛</a>►<a class="article-category-link" href="/categories/信息学竞赛/考试/">考试</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/03/03/test3-3/">3月3日考试总结</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Luogu-P1471-方差"><a href="#Luogu-P1471-方差" class="headerlink" title="Luogu P1471 方差"></a><a href="https://www.luogu.org/problemnew/show/P1471" target="_blank" rel="external">Luogu P1471 方差</a></h2><h3 id="题目背景"><a href="#题目背景" class="headerlink" title="题目背景"></a>题目背景</h3><p>　　滚粗了的HansBug在收拾旧数学书，然而他发现了什么奇妙的东西。</p>
<h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p>　　蒟蒻HansBug在一本数学书里面发现了一个神奇的数列，包含N个实数。他想算算这个数列的平均数和方差。</p>
<h3 id="输入输出格式"><a href="#输入输出格式" class="headerlink" title="输入输出格式"></a>输入输出格式</h3><h4 id="输入格式："><a href="#输入格式：" class="headerlink" title="输入格式："></a>输入格式：</h4><p>　　第一行包含两个正整数N、M，分别表示数列中实数的个数和操作的个数。第二行包含N个实数，其中第i个实数表示数列的第i项。<br>　　接下来M行，每行为一条操作，格式为以下两种之一：</p>
<ul>
<li>操作1：1 x y k ，表示将第x到第y项每项加上k，k为一实数。</li>
<li>操作2：2 x y ，表示求出第x到第y项这一子数列的平均数。</li>
<li>操作3：3 x y ，表示求出第x到第y项这一子数列的方差。</li>
</ul>
<h4 id="输出格式："><a href="#输出格式：" class="headerlink" title="输出格式："></a>输出格式：</h4><p>　　输出包含若干行，每行为一个实数，即依次为每一次操作2或操作3所得的结果（所有结果四舍五入保留4位小数）。</p>
<h3 id="输入输出样例"><a href="#输入输出样例" class="headerlink" title="输入输出样例"></a>输入输出样例</h3><h4 id="输入样例-1："><a href="#输入样例-1：" class="headerlink" title="输入样例#1："></a>输入样例#1：</h4><p>5 5<br>1 5 4 2 3<br>2 1 4<br>3 1 5<br>1 1 1 1<br>1 2 2 -1<br>3 1 5</p>
<h4 id="输出样例-1："><a href="#输出样例-1：" class="headerlink" title="输出样例#1："></a>输出样例#1：</h4><p>3.0000<br>2.0000<br>0.8000</p>
<h3 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h3><p><img src="https://i.loli.net/2018/03/03/5a9a940304eef.png" alt="Png1"></p>
<h3 id="样例说明："><a href="#样例说明：" class="headerlink" title="样例说明："></a>样例说明：</h3><p><img src="https://i.loli.net/2018/03/03/5a9a9403054e8.png" alt="Png2"></p>
<h3 id="数据规模："><a href="#数据规模：" class="headerlink" title="数据规模："></a>数据规模：</h3><p><img src="https://i.loli.net/2018/03/03/5a9a940307412.png" alt="Png3"></p>
<h3 id="做法"><a href="#做法" class="headerlink" title="做法:"></a>做法:</h3><p>　　首先区间平均数是很容易维护的, 用线段树或者分块维护区间和除去区间大小就是区间平均数.区间加也是线段树的常见操作.<br>　　考虑如何维护方差, 我们观察到方差的式子不仅和元素有关还和区间平均数有关, 这样就没办法在一个很快的时间内处理出来, 可以试着将其化简.<br>$$<br>\begin{align}<br>S^2=&amp;\frac{1}{r-l+1}\sum_{i=l}^r|A_i-\bar{A}|^2\\<br>=&amp;\frac{1}{r-l+1}\sum_{i=l}^r(A_i-\bar{A})^2\\<br>=&amp;\frac{1}{r-l+1}(\sum_{i=l}^rA_i^2-2A_i\bar{A}+\bar{A}^2)\\<br>\end{align}<br>$$<br>　　我们观察到这个式子只和$\sum\limits_{i=l}^rA_i^2,\sum\limits_{i=l}^rA_i,\bar{A}$有关, 所以可以直接维护区间平方和和区间和, 在根据其计算出方差即可.<br>　　还需要考虑在区间加下维护区间平方和的问题,仍然推公式.<br>$$<br>\begin{align}<br>\sum_{i=l}^r(A_i+\Delta A)^2=&amp;\sum_{i=l}^r(A_i^2+2A_i\Delta A+\Delta A^2)\\<br>\end{align}<br>$$</p>
<h3 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// luogu-judger-enable-o2</span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> N 100005</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">namespace</span> Input&#123;</div><div class="line">    <span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">read</span><span class="params">(<span class="keyword">int</span> &amp;s)</span></span>&#123;</div><div class="line">        <span class="keyword">char</span> ch=getchar();<span class="keyword">int</span> f=<span class="number">1</span>;</div><div class="line">        <span class="keyword">for</span>(;!<span class="built_in">isdigit</span>(ch);ch=getchar())<span class="keyword">if</span>(ch==<span class="string">'-'</span>)f=<span class="number">-1</span>;</div><div class="line">        <span class="keyword">for</span>(s=<span class="number">0</span>;<span class="built_in">isdigit</span>(ch);s=s*<span class="number">10</span>+ch-<span class="string">'0'</span>,ch=getchar());</div><div class="line">        s*=f;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">read</span><span class="params">(<span class="keyword">double</span> &amp;s)</span></span>&#123;</div><div class="line">        <span class="built_in">cin</span>&gt;&gt;s;</div><div class="line">    &#125;</div><div class="line">&#125;;<span class="keyword">using</span> <span class="keyword">namespace</span> Input;</div><div class="line"></div><div class="line"><span class="keyword">struct</span> Node&#123;</div><div class="line">    <span class="keyword">double</span> data,flag,pingfang;</div><div class="line">    <span class="keyword">int</span> l,r;</div><div class="line">&#125;t[N&lt;&lt;<span class="number">2</span>];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">double</span> <span class="title">merge</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r)</span></span>&#123;</div><div class="line">    <span class="keyword">return</span> t[l].data+t[r].data;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">pushdown</span><span class="params">(<span class="keyword">int</span> ret)</span></span>&#123;</div><div class="line">    <span class="keyword">if</span>(!t[ret].flag)<span class="keyword">return</span> ;</div><div class="line">    <span class="keyword">int</span> l=t[ret].l,r=t[ret].r;</div><div class="line">    <span class="keyword">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>;</div><div class="line">    t[ret&lt;&lt;<span class="number">1</span>].flag+=t[ret].flag;</div><div class="line">    t[ret&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].flag+=t[ret].flag;</div><div class="line">    t[ret&lt;&lt;<span class="number">1</span>].pingfang+=(mid-l+<span class="number">1</span>)*t[ret].flag*t[ret].flag+<span class="number">2</span>*t[ret&lt;&lt;<span class="number">1</span>].data*t[ret].flag;</div><div class="line">    t[ret&lt;&lt;<span class="number">1</span>].data+=(mid-l+<span class="number">1</span>)*t[ret].flag;</div><div class="line">    t[ret&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].pingfang+=(r-mid)*t[ret].flag*t[ret].flag+<span class="number">2</span>*t[ret&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].data*t[ret].flag;</div><div class="line">    t[ret&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].data+=(r-mid)*t[ret].flag;</div><div class="line">    t[ret].flag=<span class="number">0</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">Build</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> ret)</span></span>&#123;</div><div class="line">    t[ret]=(Node)&#123;<span class="number">0.0</span>,<span class="number">0.0</span>,<span class="number">0.0</span>,l,r&#125;;</div><div class="line">    <span class="keyword">if</span>(l==r)&#123;</div><div class="line">        read(t[ret].data);</div><div class="line">        t[ret].pingfang=t[ret].data*t[ret].data;</div><div class="line">        <span class="keyword">return</span> ;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>;</div><div class="line">    Build(l,mid,ret&lt;&lt;<span class="number">1</span>);</div><div class="line">    Build(mid+<span class="number">1</span>,r,ret&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</div><div class="line">    t[ret].data=merge(ret&lt;&lt;<span class="number">1</span>,ret&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</div><div class="line">    t[ret].pingfang=t[ret&lt;&lt;<span class="number">1</span>].pingfang+t[ret&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].pingfang;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">Addition</span><span class="params">(<span class="keyword">int</span> L,<span class="keyword">int</span> R,<span class="keyword">int</span> ret,<span class="keyword">double</span> delta)</span></span>&#123;</div><div class="line">    <span class="keyword">int</span> l=t[ret].l,r=t[ret].r;</div><div class="line">    <span class="keyword">if</span>(l&gt;=L&amp;&amp;r&lt;=R)&#123;</div><div class="line">        t[ret].flag+=delta;</div><div class="line">        t[ret].pingfang+=(r-l+<span class="number">1</span>)*delta*delta+<span class="number">2</span>*t[ret].data*delta;</div><div class="line">        t[ret].data+=delta*(r-l+<span class="number">1</span>);</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>;</div><div class="line">    pushdown(ret);</div><div class="line">    <span class="keyword">if</span>(L&lt;=mid)Addition(L,R,ret&lt;&lt;<span class="number">1</span>,delta);</div><div class="line">    <span class="keyword">if</span>(R&gt;mid)Addition(L,R,ret&lt;&lt;<span class="number">1</span>|<span class="number">1</span>,delta);</div><div class="line">    t[ret].data=merge(ret&lt;&lt;<span class="number">1</span>,ret&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</div><div class="line">    t[ret].pingfang=t[ret&lt;&lt;<span class="number">1</span>].pingfang+t[ret&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].pingfang;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">double</span> <span class="title">Query</span><span class="params">(<span class="keyword">int</span> L,<span class="keyword">int</span> R,<span class="keyword">int</span> ret)</span></span>&#123;</div><div class="line">    <span class="keyword">int</span> l=t[ret].l,r=t[ret].r;</div><div class="line">    <span class="keyword">if</span>(l&gt;=L&amp;&amp;r&lt;=R)</div><div class="line">        <span class="keyword">return</span> t[ret].data;</div><div class="line">    <span class="keyword">double</span> ans=<span class="number">0</span>;</div><div class="line">    pushdown(ret);</div><div class="line">    <span class="keyword">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>;</div><div class="line">    <span class="keyword">if</span>(L&lt;=mid)ans+=Query(L,R,ret&lt;&lt;<span class="number">1</span>);</div><div class="line">    <span class="keyword">if</span>(R&gt;mid)ans+=Query(L,R,ret&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</div><div class="line">    <span class="keyword">return</span> ans;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">double</span> <span class="title">QueryF</span><span class="params">(<span class="keyword">int</span> L,<span class="keyword">int</span> R,<span class="keyword">int</span> ret)</span></span>&#123;</div><div class="line">    <span class="keyword">int</span> l=t[ret].l,r=t[ret].r;</div><div class="line">    <span class="keyword">if</span>(l&gt;=L&amp;&amp;r&lt;=R)</div><div class="line">        <span class="keyword">return</span> t[ret].pingfang;</div><div class="line">    <span class="keyword">double</span> ans=<span class="number">0</span>;</div><div class="line">    pushdown(ret);</div><div class="line">    <span class="keyword">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>;</div><div class="line">    <span class="keyword">if</span>(L&lt;=mid)ans+=QueryF(L,R,ret&lt;&lt;<span class="number">1</span>);</div><div class="line">    <span class="keyword">if</span>(R&gt;mid)ans+=QueryF(L,R,ret&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</div><div class="line">    <span class="keyword">return</span> ans;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">double</span> <span class="title">pingjunshu</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r)</span></span>&#123;</div><div class="line">    <span class="keyword">return</span> (<span class="keyword">double</span>)Query(l,r,<span class="number">1</span>)/(<span class="keyword">double</span>)(r-l+<span class="number">1</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">double</span> <span class="title">fangcha</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r)</span></span>&#123;</div><div class="line">    <span class="keyword">double</span> sigma=Query(l,r,<span class="number">1</span>);</div><div class="line">    <span class="keyword">double</span> truepj=sigma/(r-l+<span class="number">1</span>);</div><div class="line">    <span class="keyword">return</span> (QueryF(l,r,<span class="number">1</span>)<span class="number">-2</span>*truepj*sigma+truepj*sigma)/(r-l+<span class="number">1</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">    <span class="keyword">int</span> n,m;</div><div class="line">    <span class="keyword">int</span> apt;</div><div class="line">    <span class="keyword">int</span> a,b;</div><div class="line">    <span class="keyword">double</span> delta;</div><div class="line">    read(n);read(m);</div><div class="line">    Build(<span class="number">1</span>,n,<span class="number">1</span>);</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;++i)&#123;</div><div class="line">        read(apt);read(a);read(b);</div><div class="line">        <span class="keyword">if</span>(apt==<span class="number">1</span>)&#123;</div><div class="line">            read(delta);</div><div class="line">            Addition(a,b,<span class="number">1</span>,delta);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(apt==<span class="number">2</span>)&#123;</div><div class="line">            <span class="built_in">printf</span>(<span class="string">"%.4lf\n"</span>,pingjunshu(a,b));</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">else</span> &#123;</div><div class="line">            <span class="built_in">printf</span>(<span class="string">"%.4lf\n"</span>,fangcha(a,b));</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="Luogu-P1522-牛的旅行-Cow-Tours"><a href="#Luogu-P1522-牛的旅行-Cow-Tours" class="headerlink" title="Luogu P1522 牛的旅行 Cow Tours"></a><a href="https://www.luogu.org/problemnew/show/P1522" target="_blank" rel="external">Luogu P1522 牛的旅行 Cow Tours</a></h2><h3 id="题目描述-1"><a href="#题目描述-1" class="headerlink" title="题目描述"></a>题目描述</h3><p>农民 John的农场里有很多牧区。有的路径连接一些特定的牧区。一片所有连通的牧区称为一个牧场。但是就目前而言，你能看到至少有两个牧区通过任何路径都不连通。这样，Farmer John就有多个牧场了。</p>
<p>John想在牧场里添加一条路径(注意，恰好一条)。对这条路径有以下限制：</p>
<p>一个牧场的直径就是牧场中最远的两个牧区的距离(本题中所提到的所有距离指的都是最短的距离)。考虑如下的有5个牧区的牧场，牧区用“*”表示，路径用直线表示。每一个牧区都有自己的坐标：</p>
<pre><code>           (15,15) (20,15)
            D       E
            *-------*
            |     _/|
            |   _/  |
            | _/    |
            |/      |
   *--------*-------*
   A        B       C
(10,10)  (15,10) (20,10)
</code></pre><p>【请将以上图符复制到记事本中以求更好的观看效果，下同】</p>
<p>这个牧场的直径大约是12.07106, 最远的两个牧区是A和E，它们之间的最短路径是A-B-E。</p>
<p>这里是另一个牧场：</p>
<pre><code>       *F(30,15)
      / 
    _/  
  _/    
 /      
*------* 
G      H
(25,10)   (30,10)
</code></pre><p>在目前的情景中，他刚好有两个牧场。John将会在两个牧场中各选一个牧区，然后用一条路径连起来，使得连通后这个新的更大的牧场有最小的直径。</p>
<p>注意，如果两条路径中途相交，我们不认为它们是连通的。只有两条路径在同一个牧区相交，我们才认为它们是连通的。</p>
<p>输入文件包括牧区、它们各自的坐标，还有一个如下的对称邻接矩阵：</p>
<pre><code>A  B  C  D  E  F  G  H 
A  0  1  0  0  0  0  0  0
B  1  0  1  1  1  0  0  0
C  0  1  0  0  1  0  0  0
D  0  1  0  0  1  0  0  0
E  0  1  1  1  0  0  0  0
F  0  0  0  0  0  0  1  0
G  0  0  0  0  0  1  0  1
H  0  0  0  0  0  0  1  0
</code></pre><p>其他邻接表中可能直接使用行列而不使用字母来表示每一个牧区。输入数据中不包括牧区的名字。</p>
<p>输入文件至少包括两个不连通的牧区。</p>
<p>请编程找出一条连接两个不同牧场的路径，使得连上这条路径后，这个更大的新牧场有最小的直径。输出在所有牧场中最小的可能的直径。</p>
<h3 id="输入输出格式-1"><a href="#输入输出格式-1" class="headerlink" title="输入输出格式"></a>输入输出格式</h3><h4 id="输入格式：-1"><a href="#输入格式：-1" class="headerlink" title="输入格式："></a>输入格式：</h4><p>第1行: 一个整数N (1 &lt;= N &lt;= 150), 表示牧区数</p>
<p>第2到N+1行: 每行两个整数X,Y (0 &lt;= X ,Y&lt;= 100000), 表示N个牧区的坐标。注意每个 牧区的坐标都是不一样的。</p>
<p>第N+2行到第2*N+1行: 每行包括N个数字(0或1) 表示如上文描述的对称邻接矩阵。</p>
<h4 id="输出格式：-1"><a href="#输出格式：-1" class="headerlink" title="输出格式："></a>输出格式：</h4><p>只有一行，包括一个实数，表示所求直径。数字保留六位小数。</p>
<p>只需要打到小数点后六位即可，不要做任何特别的四舍五入处理。</p>
<h3 id="输入输出样例-1"><a href="#输入输出样例-1" class="headerlink" title="输入输出样例"></a>输入输出样例</h3><h4 id="输入样例-1：-1"><a href="#输入样例-1：-1" class="headerlink" title="输入样例#1："></a>输入样例#1：</h4><pre><code>8
10 10
15 10
20 10
15 15
20 15
30 15
25 10
30 10
01000000
10111000
01001000
01001000
01110000
00000010
00000101
00000010
</code></pre><h4 id="输出样例-1：-1"><a href="#输出样例-1：-1" class="headerlink" title="输出样例#1："></a>输出样例#1：</h4><pre><code>22.071068
</code></pre><h4 id="说明-1"><a href="#说明-1" class="headerlink" title="说明"></a>说明</h4><p>翻译来自NOCOW<br>USACO 2.4</p>
<h3 id="做法-1"><a href="#做法-1" class="headerlink" title="做法:"></a>做法:</h3><p>　　要求在两个任意联通块之间连上一条边, 让其直径最短.所以就可以依次枚举两个联通块并枚举它们的任意两点连上一条边,求出直径更新答案即可.<br>　　要快速求出连边之后联通块的直径,只需要求出两个联通块到达所连边的点的最大距离即可, 注意直径不一定通过所连接的边,所以直径可能会是某个其它联通块的直径, 再加上连边的长度就是直径.至于如何求出到达一个点的最大距离, 用最短路处理即可,这里用<code>Floyd</code>算法.<br>　　为什么这样做复杂度是正确的?我们观察到枚举连边需要枚举两个联通块并枚举其中的边, 但是图的总点数是$n\leq 150$, 而不会枚举一个点多次, 所以这一步的复杂度是$O(n^2)$,<code>Floyd</code>的算法复杂度是$O(n^3)0$, 在加上处理联通块的深搜$O(n)$,总复杂度是$O(n^3)$.</p>
<h3 id="Code-1"><a href="#Code-1" class="headerlink" title="Code"></a>Code</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// luogu-judger-enable-o2</span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> N 155</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">double</span> dis[N][N];</div><div class="line"><span class="keyword">int</span> here[N][N];</div><div class="line"><span class="keyword">int</span> <span class="built_in">map</span>[N][N];</div><div class="line"><span class="keyword">int</span> x[N],y[N];</div><div class="line"><span class="keyword">double</span> lon[N];</div><div class="line"><span class="keyword">int</span> color;</div><div class="line"><span class="keyword">int</span> be[N];</div><div class="line"><span class="keyword">int</span> n;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">double</span> <span class="title">distan</span><span class="params">(<span class="keyword">int</span> i,<span class="keyword">int</span> j)</span></span>&#123;</div><div class="line">    <span class="keyword">if</span>(i==j)<span class="keyword">return</span> <span class="number">0.000</span>;</div><div class="line">    <span class="keyword">return</span> <span class="built_in">sqrt</span>((<span class="keyword">double</span>)(x[i]-x[j])*(<span class="keyword">double</span>)(x[i]-x[j])+(<span class="keyword">double</span>)(y[i]-y[j])*(<span class="keyword">double</span>)(y[i]-y[j]));</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> c)</span></span>&#123;</div><div class="line">    be[x]=c;here[c][++here[c][<span class="number">0</span>]]=x;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)</div><div class="line">        <span class="keyword">if</span>(!be[i]&amp;&amp;<span class="built_in">map</span>[i][x])</div><div class="line">            dfs(i,c);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;x[i],&amp;y[i]);</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=n;++j)&#123;</div><div class="line">            <span class="keyword">char</span> ch=getchar();</div><div class="line">            <span class="keyword">while</span>(!<span class="built_in">isdigit</span>(ch))ch=getchar();</div><div class="line">            <span class="built_in">map</span>[i][j]=(ch==<span class="string">'1'</span>?<span class="literal">true</span>:<span class="literal">false</span>);</div><div class="line">            <span class="keyword">if</span>(<span class="built_in">map</span>[i][j])dis[i][j]=distan(i,j);</div><div class="line">            <span class="keyword">else</span> dis[i][j]=<span class="number">0x3f3f3f3f</span>;</div><div class="line">        &#125;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)</div><div class="line">        dis[i][i]=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)</div><div class="line">        <span class="keyword">if</span>(!be[i])</div><div class="line">            dfs(i,++color);</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">1</span>;k&lt;=n;k++)</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</div><div class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=n;j++)</div><div class="line">                <span class="keyword">if</span>(dis[i][k]+dis[k][j]&lt;dis[i][j])</div><div class="line">                    dis[i][j]=dis[i][k]+dis[k][j];</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=n;++j)</div><div class="line">            <span class="keyword">if</span>(dis[i][j]!=<span class="number">0x3f3f3f3f</span>)&#123;</div><div class="line">                lon[i]=max(lon[i],dis[i][j]);</div><div class="line">                lon[j]=max(lon[j],dis[i][j]);</div><div class="line">            &#125;</div><div class="line">    <span class="keyword">double</span> ans=<span class="number">123456789000</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=color;++i)</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=color;++j)&#123;</div><div class="line">            <span class="keyword">if</span>(i==j)<span class="keyword">continue</span>;</div><div class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">1</span>;k&lt;=here[i][<span class="number">0</span>];++k)</div><div class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> l=<span class="number">1</span>;l&lt;=here[j][<span class="number">0</span>];++l)&#123;</div><div class="line">                    <span class="keyword">double</span> o=<span class="number">0.0</span>;                </div><div class="line">                    o=max(o,lon[here[i][k]]+lon[here[j][l]]+distan(here[j][l],here[i][k]));</div><div class="line">                    <span class="keyword">if</span>(o&lt;ans)ans=o;</div><div class="line">                &#125;</div><div class="line">        &#125;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)</div><div class="line">        ans=max(ans,lon[i]);</div><div class="line">    <span class="built_in">printf</span>(<span class="string">"%.6f"</span>,ans);</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="Logu-P1084-疫情控制"><a href="#Logu-P1084-疫情控制" class="headerlink" title="Logu P1084 疫情控制"></a><a href="https://www.luogu.org/problemnew/show/P1084" target="_blank" rel="external">Logu P1084 疫情控制</a></h2><h3 id="题目描述-2"><a href="#题目描述-2" class="headerlink" title="题目描述"></a>题目描述</h3><p>H 国有 n 个城市，这 n 个城市用 n-1 条双向道路相互连通构成一棵树，1 号城市是首都，也是树中的根节点。</p>
<p>H 国的首都爆发了一种危害性极高的传染病。当局为了控制疫情，不让疫情扩散到边境城市（叶子节点所表示的城市），决定动用军队在一些城市建立检查点，使得从首都到边境城市的每一条路径上都至少有一个检查点，边境城市也可以建立检查点。但特别要注意的是，首都是不能建立检查点的。</p>
<p>现在，在 H 国的一些城市中已经驻扎有军队，且一个城市可以驻扎多个军队。一支军队可以在有道路连接的城市间移动，并在除首都以外的任意一个城市建立检查点，且只能在一个城市建立检查点。一支军队经过一条道路从一个城市移动到另一个城市所需要的时间等于道路的长度（单位：小时）。</p>
<p>请问最少需要多少个小时才能控制疫情。注意：不同的军队可以同时移动。</p>
<h3 id="输入输出格式-2"><a href="#输入输出格式-2" class="headerlink" title="输入输出格式"></a>输入输出格式</h3><h4 id="输入格式：-2"><a href="#输入格式：-2" class="headerlink" title="输入格式："></a>输入格式：</h4><p>第一行一个整数 n，表示城市个数。</p>
<p>接下来的 n-1 行，每行 3 个整数，u、v、w，每两个整数之间用一个空格隔开，表示从城市 u 到城市 v 有一条长为 w 的道路。数据保证输入的是一棵树，且根节点编号为 1。</p>
<p>接下来一行一个整数 m，表示军队个数。</p>
<p>接下来一行 m 个整数，每两个整数之间用一个空格隔开，分别表示这 m 个军队所驻扎的城市的编号。</p>
<h4 id="输出格式：-2"><a href="#输出格式：-2" class="headerlink" title="输出格式："></a>输出格式：</h4><p>共一行，包含一个整数，表示控制疫情所需要的最少时间。如果无法控制疫情则输出-1。</p>
<h3 id="输入输出样例-2"><a href="#输入输出样例-2" class="headerlink" title="输入输出样例"></a>输入输出样例</h3><h4 id="输入样例-1：-2"><a href="#输入样例-1：-2" class="headerlink" title="输入样例#1："></a>输入样例#1：</h4><p>4<br>1 2 1<br>1 3 2<br>3 4 3<br>2<br>2 2</p>
<h4 id="输出样例-1：-2"><a href="#输出样例-1：-2" class="headerlink" title="输出样例#1："></a>输出样例#1：</h4><p>3</p>
<h3 id="说明-2"><a href="#说明-2" class="headerlink" title="说明"></a>说明</h3><h4 id="【输入输出样例说明】"><a href="#【输入输出样例说明】" class="headerlink" title="【输入输出样例说明】"></a>【输入输出样例说明】</h4><p>第一支军队在 2 号点设立检查点，第二支军队从 2 号点移动到 3 号点设立检查点，所需时间为 3 个小时。</p>
<h4 id="【数据范围】"><a href="#【数据范围】" class="headerlink" title="【数据范围】"></a>【数据范围】</h4><p>保证军队不会驻扎在首都。<br>对于 20%的数据，$2≤ n≤ 10$；<br>对于 40%的数据，$2 ≤n≤50，0&lt;w &lt;10^5$；<br>对于 60%的数据，$2 ≤ n≤1000，0&lt;w &lt;10^6$；<br>对于 80%的数据，$2 ≤ n≤10,000$；<br>对于 100%的数据，$2≤m≤n≤50,000，0&lt;w &lt;10^9$。<br>NOIP 2012 提高组 第二天 第三题</p>
<h3 id="做法-2"><a href="#做法-2" class="headerlink" title="做法:"></a>做法:</h3><p>　　这道题相对来说是这三道题中最难的,但是一旦掌握了一些方法和技巧就能轻松解决此题.<br>　　首先要求所需时间最少, 我们可以联想到二分答案, 二分所需时间, 只需要判断时间内能不能满足即可, 需要$O(\log n)$次判断.<br>　　我们还知道, 因为结点是同步移动的, 而军队越往上走覆盖的结点越多, 所以在不超过时间的情况下, 将结点尽可能的往上移动, 跳到根结点为止, 当然一个一个移动还是太慢了, 所以可以用倍增来加速.<br>　　在结点不能再跳跃时, 必定有一些结点还能再往其它根结点的子树跳跃, 也必定有一些结点没有被覆盖, 所以我们利用这些还能跳跃的节点进行覆盖, 根据显然的<strong>贪心策略</strong>, 选出剩余时间最多的军队和距离根节点最远的结点进行配对是最优的.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/03/03/test3-3/" data-id="cjftq8nym008ve0keq7iq2m8q" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Floyd/">Floyd</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/二分答案/">二分答案</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/倍增/">倍增</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/图论/">图论</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/最短路/">最短路</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/线段树/">线段树</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/贪心/">贪心</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-cf786a" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/03/03/cf786a/" class="article-date">
  <time datetime="2018-03-03T02:29:40.000Z" itemprop="datePublished">2018-03-03</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/信息学竞赛/">信息学竞赛</a>►<a class="article-category-link" href="/categories/信息学竞赛/题目/">题目</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/03/03/cf786a/">CodeForces 786A Berzerk</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="A-Berzerk"><a href="#A-Berzerk" class="headerlink" title="A. Berzerk"></a>A. Berzerk</h2><h3 id="description"><a href="#description" class="headerlink" title="description"></a>description</h3><p>　　Rick and Morty are playing their own version of Berzerk (which has nothing in common with the famous Berzerk game). This game needs a huge space, so they play it with a computer.<br>　　In this game there are n objects numbered from 1 to n arranged in a circle (in clockwise order). Object number 1 is a black hole and the others are planets. There’s a monster in one of the planet. Rick and Morty don’t know on which one yet, only that he’s not initially in the black hole, but Unity will inform them before the game starts. But for now, they want to be prepared for every possible scenario.<br>　　Each one of them has a set of numbers between 1 and n - 1 (inclusive). Rick’s set is s1 with k1 elements and Morty’s is s2 with k2 elements. One of them goes first and the player changes alternatively. In each player’s turn, he should choose an arbitrary number like x from his set and the monster will move to his x-th next object from its current position (clockwise). If after his move the monster gets to the black hole he wins.<br>　　Your task is that for each of monster’s initial positions and who plays first determine if the starter wins, loses, or the game will stuck in an infinite loop. In case when player can lose or make game infinity, it more profitable to choose infinity game.</p>
<h3 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h3><p>　　The first line of input contains a single integer n ($2 ≤ n ≤ 7000$) — number of objects in game.<br>　　The second line contains integer k1 followed by k1 distinct integers s1, 1, s1, 2, …, s1, k1 — Rick’s set.<br>　　The third line contains integer k2 followed by k2 distinct integers s2, 1, s2, 2, …, s2, k2 — Morty’s set</p>
<p>$1 ≤ ki ≤ n - 1 and 1 ≤ si, 1, si, 2, …, si, ki ≤ n - 1 for 1 ≤ i ≤ 2.$</p>
<h3 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h3><p>　　In the first line print n - 1 words separated by spaces where i-th word is “Win” (without quotations) if in the scenario that Rick plays first and monster is initially in object number i + 1 he wins, “Lose” if he loses and “Loop” if the game will never end.<br>　　Similarly, in the second line print n - 1 words separated by spaces where i-th word is “Win” (without quotations) if in the scenario that Morty plays first and monster is initially in object number i + 1 he wins, “Lose” if he loses and “Loop” if the game will never end.</p>
<h3 id="Examples"><a href="#Examples" class="headerlink" title="Examples"></a>Examples</h3><h4 id="input-1"><a href="#input-1" class="headerlink" title="input #1"></a>input #1</h4><p>5<br>2 3 2<br>3 1 2 3</p>
<h4 id="output-1"><a href="#output-1" class="headerlink" title="output #1"></a>output #1</h4><p>Lose Win Win Loop<br>Loop Win Win Win</p>
<h4 id="input-2"><a href="#input-2" class="headerlink" title="input #2"></a>input #2</h4><p>8<br>4 6 2 3 4<br>2 3 6</p>
<h4 id="output-2"><a href="#output-2" class="headerlink" title="output #2"></a>output #2</h4><p>Win Win Win Win Win Win Win<br>Lose Win Lose Lose Win Lose Lose</p>
<h3 id="Way"><a href="#Way" class="headerlink" title="Way:"></a>Way:</h3><p>　　这显然是一个无限博弈问题, 因为两人都选择最佳策略, 所以两个人有可能一直僵持下去谁也奈何不了谁, 这显然就是平局.<br>　　显然可以用搜索搜出每个状态的所有后继状态, 根据必败态和必胜态的定义.</p>
<ul>
<li>终止状态是必败态. </li>
<li>有一个后继状态是必败态的状态是必胜态.</li>
<li>所以后继状态都是必胜态的状态是必败态.</li>
</ul>
<p>　　通过这样可以推出所有的必胜态和必败态.可是平局如何定义呢?后继状态有不确定状态的状态是不确定状态, 可以发现它构成了一个环.</p>
<h3 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdlib&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> N 7005</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">namespace</span> Input&#123;</div><div class="line">    <span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span></span>&#123;</div><div class="line">        <span class="keyword">char</span> ch=getchar();<span class="keyword">int</span> s=<span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span>(;!<span class="built_in">isdigit</span>(ch);ch=getchar());</div><div class="line">        <span class="keyword">for</span>(;<span class="built_in">isdigit</span>(ch);s=s*<span class="number">10</span>+ch-<span class="string">'0'</span>,ch=getchar());</div><div class="line">        <span class="keyword">return</span> s;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">read</span><span class="params">(<span class="keyword">int</span> &amp;s)</span></span>&#123;</div><div class="line">        <span class="keyword">char</span> ch=getchar();</div><div class="line">        <span class="keyword">for</span>(;!<span class="built_in">isdigit</span>(ch);ch=getchar());</div><div class="line">        <span class="keyword">for</span>(s=<span class="number">0</span>;<span class="built_in">isdigit</span>(ch);s=s*<span class="number">10</span>+ch-<span class="string">'0'</span>,ch=getchar());</div><div class="line">    &#125;</div><div class="line">&#125;;<span class="keyword">using</span> <span class="keyword">namespace</span> Input;</div><div class="line"><span class="keyword">struct</span> Move&#123;</div><div class="line">    <span class="keyword">int</span> pos;</div><div class="line">    <span class="keyword">bool</span> now;</div><div class="line">    Move(<span class="keyword">int</span> _pos=<span class="number">0</span>,<span class="keyword">bool</span> _now=<span class="number">1</span>)&#123;pos=_pos;now=_now;&#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">int</span> mark[N][<span class="number">2</span>],alt[N][<span class="number">2</span>];</div><div class="line"><span class="keyword">int</span> vis[N][<span class="number">2</span>],du[N][<span class="number">2</span>];</div><div class="line"><span class="keyword">int</span> f[N][<span class="number">2</span>],s[<span class="number">2</span>],n;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">mov</span><span class="params">(<span class="keyword">int</span> pos,<span class="keyword">int</span> step)</span></span>&#123;</div><div class="line">    <span class="keyword">return</span> (pos-step+n)%n;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">bfs</span><span class="params">()</span></span>&#123;</div><div class="line">    <span class="built_in">queue</span>&lt;Move&gt;que;</div><div class="line">    f[<span class="number">0</span>][<span class="number">1</span>]=f[<span class="number">0</span>][<span class="number">0</span>]=<span class="number">2</span>;</div><div class="line">    que.push((Move)&#123;<span class="number">0</span>,<span class="number">0</span>&#125;);</div><div class="line">    que.push((Move)&#123;<span class="number">0</span>,<span class="number">1</span>&#125;);</div><div class="line">    vis[<span class="number">0</span>][<span class="number">1</span>]=<span class="literal">true</span>;</div><div class="line">    vis[<span class="number">0</span>][<span class="number">0</span>]=<span class="literal">true</span>;</div><div class="line">    <span class="keyword">while</span>(!que.empty())&#123;</div><div class="line">        Move top=que.front();que.pop();</div><div class="line">        <span class="keyword">bool</span> opt=top.now^<span class="number">1</span>;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;s[opt];++i)&#123;</div><div class="line">            <span class="keyword">int</span> to=mov(top.pos,alt[i][opt]);</div><div class="line">            <span class="keyword">if</span>(f[top.pos][top.now]==<span class="number">1</span>)&#123;</div><div class="line">                mark[to][opt]++;</div><div class="line">                <span class="keyword">if</span>(!vis[to][opt]&amp;&amp;mark[to][opt]==s[opt])&#123;</div><div class="line">                    f[to][opt]=<span class="number">2</span>;</div><div class="line">                    vis[to][opt]=<span class="literal">true</span>;</div><div class="line">                    que.push((Move)&#123;to,opt&#125;);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(!vis[to][opt])&#123;</div><div class="line">                f[to][opt]=<span class="number">1</span>;</div><div class="line">                vis[to][opt]=<span class="literal">true</span>;</div><div class="line">                que.push((Move)&#123;to,opt&#125;);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">    read(n);</div><div class="line">    read(s[<span class="number">0</span>]);</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;s[<span class="number">0</span>];++i)read(alt[i][<span class="number">0</span>]);</div><div class="line">    read(s[<span class="number">1</span>]);</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;s[<span class="number">1</span>];++i)read(alt[i][<span class="number">1</span>]);</div><div class="line">    bfs();<span class="keyword">int</span> ans;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n;++i)&#123;</div><div class="line">        ans=f[i][<span class="number">0</span>];</div><div class="line">        <span class="built_in">printf</span>(ans?ans==<span class="number">1</span>?<span class="string">"Win"</span>:<span class="string">"Lose"</span>:<span class="string">"Loop"</span>);</div><div class="line">        <span class="built_in">putchar</span>(<span class="string">' '</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">putchar</span>(<span class="string">'\n'</span>);</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n;++i)&#123;</div><div class="line">        ans=f[i][<span class="number">1</span>];</div><div class="line">        <span class="built_in">printf</span>(ans?ans==<span class="number">1</span>?<span class="string">"Win"</span>:<span class="string">"Lose"</span>:<span class="string">"Loop"</span>);</div><div class="line">        <span class="built_in">putchar</span>(<span class="string">' '</span>);</div><div class="line">    &#125;</div><div class="line">    system(<span class="string">"pause"</span>);</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/03/03/cf786a/" data-id="cjftq8nuo001he0kekw0ptuj7" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/bfs/">bfs</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/with-draw/">with draw</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/博弈论/">博弈论</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/无限/">无限</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-cf494e" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/03/01/cf494e/" class="article-date">
  <time datetime="2018-03-01T00:35:45.000Z" itemprop="datePublished">2018-03-01</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/信息学竞赛/">信息学竞赛</a>►<a class="article-category-link" href="/categories/信息学竞赛/题目/">题目</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/03/01/cf494e/">CodeForces 494E sharti</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="http://codeforces.com/problemset/problem/494/E" target="_blank" rel="external">http://codeforces.com/problemset/problem/494/E</a></p>
<h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p>　　During the last 24 hours Hamed and Malek spent all their time playing “Sharti”. Now they are too exhausted to finish the last round. So they asked you for help to determine the winner of this round.</p>
<p>　　“Sharti” is played on a n × n board with some of cells colored white and others colored black. The rows of the board are numbered from top to bottom using number 1 to n. Also the columns of the board are numbered from left to right using numbers 1 to n. The cell located at the intersection of i-th row and j-th column is denoted by (i, j).</p>
<p>　　The players alternatively take turns. In each turn the player must choose a square with side-length at most k with its lower-right cell painted white. Then the colors of all the cells in this square are inversed (white cells become black and vice-versa). The player who cannot perform a move in his turn loses.</p>
<p>　　You know Hamed and Malek are very clever and they would have played their best moves at each turn. Knowing this and the fact that Hamed takes the first turn, given the initial board as described in the input, you must determine which one of them will be the winner.</p>
<h3 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h3><p>　　In this problem the initial board is specified as a set of m rectangles. All cells that lie inside at least one of these rectangles are colored white and the rest are colored black.</p>
<p>　　In the first line of input three space-spereated integers$ n, m, k (1 ≤ k ≤ n ≤ 10^9, 1 ≤ m ≤ 5·10^4)$ follow, denoting size of the board, number of rectangles and maximum size of the turn square during the game, respectively.</p>
<p>　　In i-th line of the next m lines four space-seperated integers$ a_i, b_i, c_i, d_i (1 ≤ a_i ≤ c_i ≤ n, 1 ≤ b_i ≤ d_i ≤ n) $are given meaning that i-th rectangle determining the initial board is a rectangle with upper-left cell at $(a_i, b_i)$ and lower-right cell at $(c_i, d_i)$.</p>
<h3 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h3><p>　　If Hamed wins, print “Hamed”, otherwise print “Malek” (without the quotes).</p>
<h3 id="Examples"><a href="#Examples" class="headerlink" title="Examples"></a>Examples</h3><h4 id="inputCopy"><a href="#inputCopy" class="headerlink" title="inputCopy"></a>inputCopy</h4><p>5 2 1<br>1 1 3 3<br>2 2 4 4</p>
<h4 id="output"><a href="#output" class="headerlink" title="output"></a>output</h4><p>Malek</p>
<h4 id="inputCopy-1"><a href="#inputCopy-1" class="headerlink" title="inputCopy"></a>inputCopy</h4><p>12 5 7<br>3 4 5 6<br>1 2 1 2<br>4 5 9 9<br>8 6 12 10<br>12 4 12 4</p>
<h4 id="output-1"><a href="#output-1" class="headerlink" title="output"></a>output</h4><p>Hamed</p>
<h3 id="做法"><a href="#做法" class="headerlink" title="做法:"></a>做法:</h3><p>　　首先吐槽网上连个题解都没有, 大家都在做A题没有做E题啊.<br>　　首先证明每个格子可以被看成是独立的, 这个可以归纳证明.假设格子之前的格子已经被证明是独立的, 需要证明这个格子也是独立的.<br>　　如果将其为右下角的一个正方形反色, 相当于是将正方形中白色变成黑色, 黑色变成白色.如果我们将白色棋子看成是一个独立游戏的话, 白色变成黑色相当于是删掉了这个点对应的独立游戏, 黑色变成白色相当于是加上了这个游戏.<br>　　从整体上来说, 这个白色棋子的操作就相当于是在整个局面上加上或者是减去了若干个独立游戏, 而无论是加上一个游戏还是减去一个游戏, 在$SG$值上都是异或(对于白色棋子来说它变成黑色等于是它自己对应的游戏又加上了它自己对应的游戏, 我们知道游戏的和为异或), 所以相当于是若干个独立游戏的异或和, 所以这个格子是独立的.<br>　　那个一个游戏的后继状态就是在它的正方形里的点对应的独立游戏, 也就是正方形中点的$SG$函数的异或和.这个游戏的SG值就是所有后继状态的$mex$.<br>　　需要用某些数据结构来维护可以我不会.</p>
<h3 id="官方题解"><a href="#官方题解" class="headerlink" title="官方题解"></a>官方题解</h3><p>　　Let’s first solve this problem for another game: Suppose that we’ve an $n\times n$ table. Each cell have some(possibly zero) marbles on it. During each move the player chooses a square with side-length at most $k$ which its lower-right cell has at least one marble, he removes one marble from it and puts one marble in every other cell of this square. One can notice that in such game each marble is independent of the others and doesn’t affect other marbles. So one can see this game as some separate games played on some tables. More formally for each marble placed in a cell such as $(i, j)$ consider the game when played on a i $\times j$ table which the only marble placed on it is at its lower-right cell. Let’s denote the Grundy number of this game by $g_{i, j}$. Then according to Grundy theorem the first player has a winning strategy if and only if the $xor$ of $g_{i, j} $for every cell $(i, j)$ having odd number of marbles on it is positive.<br>　　To calculate $g_{i, j}$ note that the first move in such game must be choosing a square with its lower-right cell being the lower-right cell of table. So the only thing to decide is the side-length of chosen square at the first move. Let’s say we choose the first square width side length $l$. Grundy number of the next state will be equal to $xor$ of $g_{c, d} $for every$ i - l &lt; c ≤ i, j - l &lt; d ≤ j$. Using this fact one can calculate$ g_{i, j}$ for all $(1 ≤ i, j ≤ a)$ (a being an arbitrary integers) in $O(a^3$).<br>　　If we calculated the first values of $g_{i, j}$ one can see a pattern in the Grundy numbers. Then one can prove that $g_{i, j}$ = $\min(lowest\text{_}bit(i), lowest\text{_}bit(j), greatest\text{_}bit(k))$ where $lowest\text{_}bit(x)$ =  the maximum power of 2 which is a divisor of x and $greatest\text{_}bit(x)$ =  the maximum power of 2 which is not greater than x.<br>　　Now let’s prove that our first game(the game described in the statement) is actually the same as this game. Suppose that a player has a winning strategy in the first game. Consider a table containing one marble at every cell which is white in the table of the first game. We’ll prove that the same player has winning strategy in this game as well. Note that a cell is white in the first game if and only if the parity of marbles in the second game is odd so there is at least one marble on it. So as long as the other player chooses a square with its lower-right cell having odd number of marbles in the second game, his move corresponds to a move in the first game so the player having winning strategy can counter his move. If the other player chooses a square with its lower-right cell having even number of marbles, it means the cell had at least 2 marbles on it so the player can counter it by choosing the same square which makes the parity of every cell to be the same after these 2 moves. And since it can be proven that both of the game will end at some point then the player has winning strategy in this game as well. The reverse of this fact can also be proven the same since if a player has a winning strategy there is also a winning strategy in which this player always chooses squares with lower-right cell having odd number of marbles(since otherwise the other player can counter it as described above) and counters the moves of the other player at which he chose a square with lower-right cell having even number of marbles by choosing the same square(since the Grundy number by countering in this way won’t change the Grundy number and thus won’t change the player with winning strategy).<br>　　So if we consider a table having one marble at each of the cells which are in at least one of the rectangles given in the input we only need to calculate the Grundy number of this state and check whether it’s positive or not to determine the winner. To do this for each i(1 ≤ i ≤ greatest_bit(k)) lets define ai as the number of cells (x, y) which are contained in at least one of the given rectangles, $2^i|x$ and $2^i|y$. Lets also define agreatest_bit(k) + 1 = 0. Then according the fact we described above about $g_{i, j}$ the number of 2 is which are xored equals $ai - a_{i + 1}$. Knowing this calculating the Grundy number of the initial state is easy. Calculating ai is identical to a very well-known problem which is given some rectangles count the number of cells in at least one of them and can be solved in O(mlgm) (m being number of rectangles). So overall complexity will be $O(mlgmlgk)$.<br>　　If there is any problem in the editorial please feel free to note that to us.</p>
<h3 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h3><p>　　看不懂, 虽然cf上所有code都可以看.貌似是用线段树维护.<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdlib&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>; </div><div class="line"></div><div class="line"><span class="keyword">struct</span> node&#123;<span class="keyword">int</span> a,b,c,ty;&#125;a[<span class="number">100010</span>];</div><div class="line"><span class="keyword">struct</span> Tnode&#123;<span class="keyword">int</span> x,f,tag,ls,rs;&#125;t[<span class="number">3000000</span>];</div><div class="line"><span class="keyword">int</span> n,m,k,K,ans,rt,tot;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(node x,node y)</span></span>&#123;<span class="keyword">return</span> x.a&lt;y.a;&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">getfull</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r)</span></span>&#123;</div><div class="line">	<span class="keyword">int</span> s=<span class="number">0</span>;l--;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=k;j&lt;&lt;=<span class="number">1</span>)</div><div class="line">		s|=(((r/j-l/j)-((j&lt;&lt;<span class="number">1</span>)&lt;=k?(r/(j&gt;&gt;<span class="number">1</span>)-l/(j&gt;&gt;<span class="number">1</span>)):<span class="number">0</span>))&amp;<span class="number">1</span>)*j;</div><div class="line">	<span class="keyword">return</span> s;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> n)</span></span>&#123;</div><div class="line">	<span class="keyword">if</span>(t[n].tag)t[n].x=t[n].f;</div><div class="line">	<span class="keyword">else</span> t[n].x=t[t[n].ls].x^t[t[n].rs].x;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">modify</span><span class="params">(<span class="keyword">int</span> &amp;n,<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> L,<span class="keyword">int</span> R,<span class="keyword">int</span> k)</span></span>&#123;</div><div class="line">	<span class="keyword">if</span>(!n)n=++tot,t[n].f=getfull(l,r);</div><div class="line">	<span class="keyword">if</span>((L&lt;=l)&amp;&amp;(r&lt;=R))t[n].tag+=k;</div><div class="line">	<span class="keyword">else</span>&#123;</div><div class="line">		<span class="keyword">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>;</div><div class="line">		<span class="keyword">if</span>(L&lt;=mid)modify(t[n].ls,l,mid,L,R,k);</div><div class="line">		<span class="keyword">if</span>(mid&lt;R)modify(t[n].rs,mid+<span class="number">1</span>,r,L,R,k);</div><div class="line">	&#125;</div><div class="line">	update(n);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">work</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;n,&amp;m,&amp;k);</div><div class="line">	<span class="keyword">for</span>(K=<span class="number">1</span>; K*<span class="number">2</span>&lt;=k; K&lt;&lt;=<span class="number">1</span>);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>,A,B,C,D;i&lt;=m;i++)&#123;</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d%d%d%d"</span>,&amp;A,&amp;B,&amp;C,&amp;D);</div><div class="line">		a[i]=(node)&#123;A,B,D,<span class="number">1</span>&#125;,a[i+m]=(node)&#123;C+<span class="number">1</span>,B,D,<span class="number">-1</span>&#125;;</div><div class="line">	&#125;</div><div class="line">	sort(a+<span class="number">1</span>,a+(m&lt;&lt;<span class="number">1</span>)+<span class="number">1</span>,cmp);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=(m&lt;&lt;<span class="number">1</span>); i++)&#123;</div><div class="line">		<span class="keyword">if</span>(a[i<span class="number">-1</span>].a!=a[i].a)&#123;</div><div class="line">			<span class="keyword">int</span> x=getfull(a[i<span class="number">-1</span>].a,a[i].a<span class="number">-1</span>),y=t[rt].x,sx=<span class="number">0</span>,sy=<span class="number">0</span>,s;</div><div class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j=K;j;j&gt;&gt;=<span class="number">1</span>)&#123;</div><div class="line">				s=-sx*sy,sx+=(x&amp;j)&gt;<span class="number">0</span>,sy+=(y&amp;j)&gt;<span class="number">0</span>,s+=sx*sy;</div><div class="line">				<span class="keyword">if</span>(s&amp;<span class="number">1</span>)ans^=j;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		modify(rt,<span class="number">1</span>,n,a[i].b,a[i].c,a[i].ty);</div><div class="line">	&#125;</div><div class="line">	<span class="built_in">printf</span>(ans?<span class="string">"Hamed\n"</span>:<span class="string">"Malek\n"</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">	work();</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/03/01/cf494e/" data-id="cjftq8nuw001qe0keei7usqa7" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/博弈论/">博弈论</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-p4077" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/02/28/p4077/" class="article-date">
  <time datetime="2018-02-28T13:06:43.000Z" itemprop="datePublished">2018-02-28</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/信息学竞赛/">信息学竞赛</a>►<a class="article-category-link" href="/categories/信息学竞赛/题目/">题目</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/02/28/p4077/">P4077 [SDOI2016]硬币游戏</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p>　　Alice 和 Bob 现在在玩的游戏，主角是依次编号为 1 到 n 的 n 枚硬币。每一枚硬币都有两面，我们分别称之为正面和反面。一开始的时候，有些硬币是正面向上的，有些是反面朝上的。Alice 和 Bob 将轮流对这些硬币进行翻转操作，且Alice 总是先手。</p>
<p>　　具体来说每次玩家可以选择一枚编号为 x，要求这枚硬币此刻是反面朝上的。对于编号 x 来说，我们总可以将 x 写成 $c\cdot 2^a \cdot 3^b⋅$，其中 a 和 b 是非负整数，c 是与 2,3 都互质的非负整数，然后有两种选择：</p>
<ul>
<li>选择整数 p,q 满足 $a \ge pq , p \ge 1$且$ 1 \leq q \leq \text{MAXQ} $，然后同时翻转所有编号为$ c \cdot 2^{a-pj} \cdot 3^bc$⋅的硬币，其中 $j = 0, 1, 2, \ldots q$ 。</li>
<li>选择整数 p,q 满足 $b \geq pq, p \ge$ 且 $1 \leq q \leq \text{MAXQ}$ ，然后同时翻转所有编号为 $c \cdot 2^a \cdot 3^{b-pj}$的硬币，其中$j = 0, 1, 2, \ldots q$ 。</li>
</ul>
<p>　　可以发现这个游戏不能无限进行下去，当某位玩家无法继续操作上述操作时，便输掉了游戏。作为先手的 Alice，总是希望可以在比赛开始之前就知道自己能否获胜。她知道自己和 Bob 都是充分聪明的，所以在游戏过程中，两人都会最优化自己的策略并尽量保证自己处于不败的情形中。</p>
<h3 id="输入输出格式"><a href="#输入输出格式" class="headerlink" title="输入输出格式"></a>输入输出格式</h3><h4 id="输入格式："><a href="#输入格式：" class="headerlink" title="输入格式："></a>输入格式：</h4><p>　　本题有多组测试数据，第一行输入一个整数T，表示总的数据组数。之后给出T组数据</p>
<p>　　每组数据第一行输入两个整数n,MAXQ</p>
<p>　　第二行输入n个整数，第i个数表示第i个硬币的初始状态，0表示反面朝上，1表示正面朝上</p>
<h4 id="输出格式："><a href="#输出格式：" class="headerlink" title="输出格式："></a>输出格式：</h4><p>　　输出共有t行。对于每一组数据来说，如果Alice先手必胜，则输出”win”（不包括引号），否则输出”lose”</p>
<h3 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h3><p>　　对于100%的数据$1\le n \le 30000,1 \le MAXQ \le 20,t\le 100$。</p>
<h3 id="做法"><a href="#做法" class="headerlink" title="做法:"></a>做法:</h3><p>　　在翻硬币游戏中有一个常用的结论,在硬币游戏中,全局的SG值等于所有能翻转的硬币的$SG$值的异或和.<br>　　在这个题目中我们观察选择一个硬币$x=c\cdot 2^a\cdot 3^b$, 我们能翻转的硬币必然是$c$值相同的.对于a来说,枚举$p$不超过$a$, 枚举$q$不超过$\frac{a}{p}$,这个复杂度可以看成是调和级数, 所以暴力枚举后继状态即可.<br>　　还有一个需要考虑的问题是当前点与它的后继点是否是独立的, 即能否互相影响.</p>
<pre><code class="c++">
</code></pre>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/02/28/p4077/" data-id="cjftq8nxn006ae0ke233xmgn3" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/博弈论/">博弈论</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-longdebug" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/02/28/longdebug/" class="article-date">
  <time datetime="2018-02-28T09:35:34.000Z" itemprop="datePublished">2018-02-28</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/解决方案/">解决方案</a>►<a class="article-category-link" href="/categories/解决方案/Hexo/">Hexo</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/02/28/longdebug/">漫长的 Debug</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="二月二十八日"><a href="#二月二十八日" class="headerlink" title="二月二十八日"></a>二月二十八日</h3><h4 id="The-First"><a href="#The-First" class="headerlink" title="The First"></a>The First</h4><p>　　<a href="http://aiyoupass.com/2018/cf842d/">CF 842D D. Vitya and Strange Lesson</a>我也很心痛啊, 盯着看了一上午, 还是没看出错误来.下午一上课, 忘了怎么观察的啦, 反正看出(1&lt;&lt; length)这个变量应该是(1&lt;&lt;(length-1)), 就这个错误浪费了我一上午……调了一会, 终于过了手造样例和官方样例, 第一遍RE第二遍AC, 恩, 估计是Rank0, 看起来是没有比我更慢的啦, 就喜欢封装和指针. 调试能力太弱, 每次写数据结构心里就发怵, 真的是被写怕了.</p>
<h4 id="The-Second"><a href="#The-Second" class="headerlink" title="The Second"></a>The Second</h4><p>　　<a href="http://aiyoupass.com/2018/uoj266/">http://aiyoupass.com/2018/uoj266/</a><br>　　非常心痛啊, 浪费了一下午和半个晚上的时间来调试那一个函数, 最后虽然调出来了, 但是并不知道是如何错的呀.</p>
<h3 id="二月二十七日"><a href="#二月二十七日" class="headerlink" title="二月二十七日"></a>二月二十七日</h3><h4 id="The-First-1"><a href="#The-First-1" class="headerlink" title="The First"></a>The First</h4><h5 id="Luogu-P3235-HNOI2014江南乐"><a href="#Luogu-P3235-HNOI2014江南乐" class="headerlink" title="Luogu P3235 HNOI2014江南乐"></a><a href="https://www.luogu.org/problemnew/show/P3235" target="_blank" rel="external">Luogu P3235 HNOI2014江南乐</a></h5><p>　　这是那一份一直出锅的代码, 花了接近一个小时调试, 可就是不行, 最后突然想到在 dfs 中全局变量会影响以后的搜索, 于是将其改为局部变量, 终于通过.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div></pre></td><td class="code"><pre><div class="line">// luogu-judger-enable-o2</div><div class="line">#include&lt;iostream&gt;</div><div class="line">#include&lt;cstring&gt;</div><div class="line">#include&lt;cstdio&gt;</div><div class="line">#define N 100005</div><div class="line">using namespace std;</div><div class="line"></div><div class="line">inline int read()&#123;</div><div class="line">    char ch=getchar();</div><div class="line">    int s=0;</div><div class="line">    for(;!isdigit(ch);ch=getchar());</div><div class="line">    for(s=0;isdigit(ch);s=s*10+ch-&apos;0&apos;,ch=getchar());</div><div class="line">    return s;</div><div class="line">&#125;</div><div class="line"></div><div class="line">int sg[N],s[N];</div><div class="line">int f;</div><div class="line"></div><div class="line">int find(int x)&#123;</div><div class="line">    if(sg[x]&gt;-1)return sg[x];</div><div class="line">    if(x&lt;f)return sg[x]=0;</div><div class="line">    sg[x]=0;int ans;</div><div class="line">    memset(s,false,sizeof(s));</div><div class="line">    for(int i=2;i&lt;=x;i=x/(x/i)+1)</div><div class="line">        for(int j=i;j&lt;=min(i+1,x);++j)&#123;</div><div class="line">            ans=0;</div><div class="line">            if((x%j)&amp;1)</div><div class="line">                ans^=find(x/j+1);</div><div class="line">            if((j-x%j)&amp;1)</div><div class="line">                ans^=find(x/j);</div><div class="line">            s[ans]=1;</div><div class="line">        &#125;</div><div class="line">    for(int i=0;;i++)</div><div class="line">        if(!s[i])&#123;</div><div class="line">            sg[x]=i;</div><div class="line">            return i;</div><div class="line">        &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">int main()&#123;</div><div class="line">    int T;</div><div class="line">    cin&gt;&gt;T&gt;&gt;f;</div><div class="line">    memset(sg,-1,sizeof(sg));</div><div class="line">    while(T--)&#123;</div><div class="line">        int ans=0,n,get;</div><div class="line">        n=read();</div><div class="line">        for(int i=1;i&lt;=n;++i)</div><div class="line">            ans^=find(read());</div><div class="line">        printf(&quot;%d &quot;,ans?1:0);</div><div class="line">    &#125;</div><div class="line">    return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>　　更改之后的代码, 或许眼细的同学可以发现错误之处.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">int find(int x)&#123;</div><div class="line">    if(sg[x]&gt;-1)return sg[x];</div><div class="line">    if(x&lt;f)return sg[x]=0;</div><div class="line">    sg[x]=0;int ans;</div><div class="line">    int s[N];</div><div class="line">    memset(s,false,sizeof(s));</div><div class="line">    for(int i=2;i&lt;=x;i=x/(x/i)+1)</div><div class="line">        for(int j=i;j&lt;=min(i+1,x);++j)&#123;</div><div class="line">            ans=0;</div><div class="line">            if((x%j)&amp;1)</div><div class="line">                ans^=find(x/j+1);</div><div class="line">            if((j-x%j)&amp;1)</div><div class="line">                ans^=find(x/j);</div><div class="line">            s[ans]=1;</div><div class="line">        &#125;</div><div class="line">    for(int i=0;;i++)</div><div class="line">        if(!s[i])&#123;</div><div class="line">            sg[x]=i;</div><div class="line">            return i;</div><div class="line">        &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h4 id="The-Second-1"><a href="#The-Second-1" class="headerlink" title="The Second"></a>The Second</h4><h5 id="Luogu-P1678-烦恼的高考志愿"><a href="#Luogu-P1678-烦恼的高考志愿" class="headerlink" title="Luogu P1678 烦恼的高考志愿"></a><a href="https://www.luogu.org/problemnew/show/P1678" target="_blank" rel="external">Luogu P1678 烦恼的高考志愿</a></h5><p>　　用了两种不同的写法来写, 都出现了同样的问题, 非常心痛, 这么简单的题目确花费了将近一下午的时间来调试.<br>　　说起来我已经非常长时间没用 GDB 调试了, 都是肉眼调试, 唯一用 GDB 只是用来观察是在哪条语句栈溢出或者死循环而已.<br>　　对于这道题来说, 如果我们二分查找到了位置 l, 那么可能称为答案的有位置$l,l-1$和$l+1$, 但是设想一个情况, 需要查找的具有$n$个元素的序列为 $\min,\min_1,\cdots,\max$, 我们要在这个序列中查找最接近$x$的元素, 可能$x\ll \min$或者$x\gg \max$ 而且更接近第零个元素和第$n+1$个元素, 那么可能就会出错, 这种情况特判掉就好.</p>
<h3 id="二月二十六日"><a href="#二月二十六日" class="headerlink" title="二月二十六日"></a>二月二十六日</h3><h4 id="The-First-2"><a href="#The-First-2" class="headerlink" title="The First"></a>The First</h4><h5 id="POJ-2311-Cutting-Game"><a href="#POJ-2311-Cutting-Game" class="headerlink" title="POJ 2311 Cutting Game"></a><a href="http://poj.org/problem?id=2311" target="_blank" rel="external">POJ 2311 Cutting Game</a></h5><p><a href="aiyoupass.com/2018/Multi-SG/">当时</a><br>　　也不是很难的一道题, 代码也不长, 可以即使我一条一条语句的去和别人的对比, 我也找不到错误之处, 这就让人非常无奈, 最终还是到了错误之处, 可是已经花了一个多小时了.原来我 <code>define</code> 了一个变量, 然后当时我定义这个变量的时候大概搞错了题意, 因此这个变量是它本来应该大小的一百分之一.<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">define</span> N 201</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> M 3</span></div><div class="line"></div><div class="line"><span class="keyword">int</span> sg[N][M]</div></pre></td></tr></table></figure></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">define</span> N 201</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> M 201</span></div><div class="line"></div><div class="line"><span class="keyword">int</span> sg[N][N];</div></pre></td></tr></table></figure>
<p>　　谁知道为什么数组溢出了编译器确不报错?数组溢出这种事情也不是经常出现, 因此被忽视了.</p>
<p>　　教训: 所以以后在做题的时候一定要注意细心, 而且在 debug 的时候一定要针对全部的代码去调试, 而不是仅仅关注几个关键的地方或者是函数, 错误很可能发生在最难以想到的地方.</p>
<h4 id="The-Second-2"><a href="#The-Second-2" class="headerlink" title="The Second"></a>The Second</h4><p>　　为了给这个 Hexo 博客加一个版权信息, 我参考了<a href="https://segmentfault.com/a/1190000009544924" target="_blank" rel="external">一篇文章</a>, 但是在应用它的时候除了出现很多见过的错误之外,还出现了以前从未出现过的情况.- 新建一个文件却将未将其保存为<code>UTF-8</code>格式, 导致乱码, 以前有不少类似经验, 迅速改正.</p>
<ul>
<li>在复制粘贴文章中的代码时, 忘记了将其版权信息删去, 导致调试网页的时候格式全部乱套, 但是 <code>Node js</code> 有提示, 迅速改正两处此类错误.</li>
<li>在本地调试时, 版权信息正常显示, 但是将其部署到<code>github</code>上之后, 其格式确全部消失.<br>　　于是找出这段代码, 发现其中使用了三个其它网站上的 <code>.js</code> 脚本, 于是猜测这三个脚本负责其格式, 未显示是其服务器阻拦, 于是将其脚本保存在网页中的文件夹里面, 但是仍然没用.<br>　　因此猜测是脚本阻拦了格式?(我到底在想什么乱七八糟的).将其删去, 可想而知, 肯定不行. 随后我开始将两个网页对比(一个是本地, 一个是网络上的), 借助于 <code>Chrome</code> 强大的功能, 我终于找到了问题所在, 原来是缺少样式表, 怪不得显示没有脚本不被正常加载.<br>　　于是我打开了网络上的样式表 <code>main.css</code>, 并和我本地网络上的样式表对比, woc, 原来是少了那段关于其样式的代码, 于是我手动添加, 正常.<br>　　为什么会出现这个问题呢? 我想是因为 hexo 只有在 <code>clean</code> 清理到本地缓存之后才会更改样式表这样底层的东西, 但是我对清理缓存有惧怕心理, 一致不敢清理, 导致了问题的发生.</li>
</ul>
<p>　　我也不是很清楚 Hexo 工作的原理, 但是在这一段时间中对其不断的调试还是摸到了一点头绪, 对网页的产生,<code>javascript</code>的工作都有了一定的了解, 这也是 Hexo 和其它博客相比好的地方.</p>
<p>　　教训: 遇到问题不要盲目到处找原因, 先冷静分析, 找到问题的所在.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/02/28/longdebug/" data-id="cjftq8nvp0037e0kegi2bkxj1" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Debug/">Debug</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Hexo/">Hexo</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/copyright/">copyright</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/版权信息/">版权信息</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/解决方案/">解决方案</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-cf842d" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/02/28/cf842d/" class="article-date">
  <time datetime="2018-02-28T06:15:31.000Z" itemprop="datePublished">2018-02-28</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/信息学竞赛/">信息学竞赛</a>►<a class="article-category-link" href="/categories/信息学竞赛/题目/">题目</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/02/28/cf842d/">CF 842D D. Vitya and Strange Lesson</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>　　我来填坑了, 十几天天前也就是2月10日我发了这篇文章不幸的是我却没有调试成功, 今天我终于把这个坑填上了(其实是因为有一道题目和这个题目很像(UOJ 266)).<br><a href="https://www.luogu.org/problemnew/show/CF842D#sub" target="_blank" rel="external">CF 842D Vitya and Strange Lesson</a><br>　　Today at the lesson Vitya learned a very interesting function — mex. Mex of a sequence of numbers is the minimum non-negative number that is not present in the sequence as element. For example, mex([4, 33, 0, 1, 1, 5]) = 2 and mex([1, 2, 3]) = 0.<br>　　Vitya quickly understood all tasks of the teacher, but can you do the same?<br>　　You are given an array consisting of n non-negative integers, and m queries. Each query is characterized by one number x and consists of the following consecutive steps:<br>　　Perform the bitwise addition operation modulo 2 (xor) of each array element with the number x.<br>　　Find mex of the resulting array<br>　　Note that after each query the array changes.</p>
<h3 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h3><p>　　First line contains two integer numbers n and m (1 ≤ n, m ≤ 3·105) — number of elements in array and number of queries.<br>Next line contains n integer numbers ai (0 ≤ ai ≤ 3·105) — elements of then array.<br>　　Each of next m lines contains query — one integer number x (0 ≤ x ≤ 3·105).</p>
<h3 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h3><p>　　For each query print the answer on a separate line.</p>
<h3 id="Examples"><a href="#Examples" class="headerlink" title="Examples"></a>Examples</h3><h4 id="input"><a href="#input" class="headerlink" title="input"></a>input</h4><p>2 2<br>1 3<br>1<br>3</p>
<h4 id="output"><a href="#output" class="headerlink" title="output"></a>output</h4><p>1<br>0</p>
<h4 id="input-1"><a href="#input-1" class="headerlink" title="input"></a>input</h4><p>4 3<br>0 1 5 6<br>1<br>2<br>4</p>
<h4 id="output-1"><a href="#output-1" class="headerlink" title="output"></a>output</h4><p>2<br>0<br>0</p>
<h4 id="input-2"><a href="#input-2" class="headerlink" title="input"></a>input</h4><p>5 4<br>0 1 5 6 7<br>1<br>1<br>4<br>5</p>
<h4 id="output-2"><a href="#output-2" class="headerlink" title="output"></a>output</h4><p>2<br>2<br>0<br>2</p>
<h3 id="做法"><a href="#做法" class="headerlink" title="做法:"></a>做法:</h3><p>　　建01 trie树,因为异或具有结合律,所以选择先不异或而是将所以需要异或的数先异或起来,遇到操作2,就查询,因为在一位上异或相当于是交换左右子树.所以在查询的时候见仁见智即可.</p>
<h3 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> N 1000005</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">struct</span> Node&#123;</div><div class="line">	Node *ch[<span class="number">2</span>];</div><div class="line">	<span class="keyword">int</span> all,length,mark;</div><div class="line">	Node()&#123;all=<span class="number">0</span>,length=<span class="number">0</span>,mark=<span class="number">0</span>;ch[<span class="number">0</span>]=<span class="literal">NULL</span>,ch[<span class="number">1</span>]=<span class="literal">NULL</span>;&#125;</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">pushdown</span><span class="params">()</span></span>&#123;</div><div class="line">		<span class="keyword">if</span>(<span class="keyword">this</span>==<span class="literal">NULL</span>)<span class="keyword">return</span> ;</div><div class="line">		<span class="keyword">if</span>(!mark)<span class="keyword">return</span> ;</div><div class="line">		<span class="keyword">if</span>(mark&amp;(<span class="number">1</span>&lt;&lt;(length<span class="number">-1</span>)))&#123;</div><div class="line">			swap(ch[<span class="number">0</span>],ch[<span class="number">1</span>]);</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">if</span>(ch[<span class="number">0</span>])ch[<span class="number">0</span>]-&gt;mark^=mark;</div><div class="line">		<span class="keyword">if</span>(ch[<span class="number">1</span>])ch[<span class="number">1</span>]-&gt;mark^=mark;</div><div class="line">		mark=<span class="literal">false</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">Merge</span><span class="params">(Node *r2)</span></span>&#123;</div><div class="line">		<span class="keyword">if</span>(<span class="keyword">this</span>==<span class="literal">NULL</span>||r2==<span class="literal">NULL</span>)<span class="keyword">return</span>;</div><div class="line">		<span class="keyword">if</span>(!length)<span class="keyword">return</span>;</div><div class="line">		<span class="keyword">this</span>-&gt;pushdown();r2-&gt;pushdown();</div><div class="line">		ch[<span class="number">0</span>]-&gt;Merge(r2-&gt;ch[<span class="number">1</span>]);</div><div class="line">		ch[<span class="number">1</span>]-&gt;Merge(r2-&gt;ch[<span class="number">2</span>]);</div><div class="line">		<span class="keyword">if</span>(ch[<span class="number">0</span>]-&gt;all&amp;&amp;ch[<span class="number">1</span>]-&gt;all)</div><div class="line">			all=<span class="literal">true</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">int</span> <span class="title">Query</span><span class="params">()</span></span>;</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">Insert</span><span class="params">(<span class="keyword">int</span>,<span class="keyword">int</span>)</span></span>;</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">Print</span><span class="params">(<span class="keyword">int</span> s)</span></span>&#123;</div><div class="line">		<span class="keyword">if</span>(!length)</div><div class="line">			<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,s);</div><div class="line">		<span class="keyword">if</span>(ch[<span class="number">0</span>]!=<span class="literal">NULL</span>)ch[<span class="number">0</span>]-&gt;Print(s);</div><div class="line">		<span class="keyword">if</span>(ch[<span class="number">1</span>]!=<span class="literal">NULL</span>)ch[<span class="number">1</span>]-&gt;Print(s+(<span class="number">1</span>&lt;&lt;(length<span class="number">-1</span>)));</div><div class="line">	&#125;</div><div class="line">&#125;pool[N&lt;&lt;<span class="number">2</span>];</div><div class="line"></div><div class="line"><span class="function">Node *<span class="title">newNode</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="keyword">static</span> <span class="keyword">int</span> cnt=<span class="number">0</span>;</div><div class="line">	<span class="keyword">return</span> &amp;pool[cnt++];</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">void</span> Node::Insert(<span class="keyword">int</span> len,<span class="keyword">int</span> data)&#123;</div><div class="line">	length=len;</div><div class="line">	<span class="keyword">if</span>(!len)&#123;</div><div class="line">		all=<span class="literal">true</span>;<span class="keyword">return</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">bool</span> s=data&amp;(<span class="number">1</span>&lt;&lt;(len<span class="number">-1</span>));</div><div class="line">	<span class="keyword">if</span>(ch[s]==<span class="literal">NULL</span>)ch[s]=newNode();</div><div class="line">	ch[s]-&gt;Insert(len<span class="number">-1</span>,data);</div><div class="line">	<span class="keyword">if</span>(ch[!s]!=<span class="literal">NULL</span>&amp;&amp;ch[<span class="number">0</span>]-&gt;all&amp;&amp;ch[<span class="number">1</span>]-&gt;all)</div><div class="line">		all=<span class="literal">true</span>;</div><div class="line">&#125;</div><div class="line"><span class="keyword">int</span> Node::Query()&#123;</div><div class="line">	<span class="keyword">int</span> ret=<span class="number">0</span>,s;</div><div class="line">	Node *now=<span class="keyword">this</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=now-&gt;length;i&gt;<span class="number">-1</span>;--i)&#123;</div><div class="line">		now-&gt;pushdown();</div><div class="line">		<span class="keyword">if</span>(!now-&gt;ch[<span class="number">0</span>])<span class="keyword">return</span> ret;</div><div class="line">		s=now-&gt;ch[<span class="number">0</span>]-&gt;all;</div><div class="line">		ret|=s&lt;&lt;(i<span class="number">-1</span>);</div><div class="line">		<span class="keyword">if</span>(s&amp;&amp;!now-&gt;ch[<span class="number">1</span>])<span class="keyword">return</span> ret;</div><div class="line">		now=now-&gt;ch[s];</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> ret;</div><div class="line">&#125;</div><div class="line"></div><div class="line">Node *rt[N];</div><div class="line"><span class="keyword">int</span> n,m,q;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</div><div class="line">	rt[<span class="number">0</span>]=newNode();</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</div><div class="line">		<span class="built_in">cin</span>&gt;&gt;q;</div><div class="line">		rt[<span class="number">0</span>]-&gt;Insert(<span class="number">20</span>,q);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;++i)&#123;</div><div class="line">		<span class="built_in">cin</span>&gt;&gt;q;</div><div class="line">		rt[<span class="number">0</span>]-&gt;mark^=q;</div><div class="line">		<span class="built_in">cout</span>&lt;&lt;rt[<span class="number">0</span>]-&gt;Query()&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/02/28/cf842d/" data-id="cjftq8nut001ne0kee8m2xurc" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CodeForces/">CodeForces</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Trie/">Trie</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/异或/">异或</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-tag" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/02/27/tag/" class="article-date">
  <time datetime="2018-02-27T11:37:01.000Z" itemprop="datePublished">2018-02-27</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/其它/">其它</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/02/27/tag/">知识结构目录</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <ul>
<li>动态规划<ul>
<li>背包</li>
<li>区间dp</li>
<li>状压dp</li>
<li>数位dp</li>
<li>期望dp</li>
<li>概率dp</li>
<li>树形dp</li>
<li>插头dp</li>
<li>斜率优化</li>
<li>决策单调性</li>
</ul>
</li>
<li>数据结构<ul>
<li>Kd-tree</li>
<li>线段树<ul>
<li>权值线段树</li>
<li>超哥线段树</li>
<li>可持久化线段树</li>
</ul>
</li>
<li>平衡树<ul>
<li>Splay</li>
<li>Treap</li>
<li>替罪羊树</li>
<li>可持久化平衡树</li>
</ul>
</li>
<li>单调队列</li>
<li>Trie<ul>
<li>可持久化Trie</li>
</ul>
</li>
<li>链表</li>
</ul>
</li>
<li>根号算法<ul>
<li>分块</li>
<li>莫队</li>
</ul>
</li>
<li>图论<ul>
<li>2-SAT</li>
<li>仙人掌</li>
<li>基环树</li>
<li>欧拉图</li>
<li>并查集</li>
<li>最短路</li>
<li>生成树</li>
<li>拓扑序</li>
<li>哈夫曼树</li>
<li>差分约束</li>
<li>强联通分量</li>
<li>最近公共祖先</li>
</ul>
</li>
<li>树形结构<ul>
<li>熟练剖分</li>
<li>动态树</li>
<li>点分治</li>
<li>虚树</li>
</ul>
</li>
<li>网络流<ul>
<li>最大流</li>
<li>费用流</li>
<li>最小割</li>
<li>上下界</li>
</ul>
</li>
<li>数学<ul>
<li>群论</li>
<li>数论</li>
<li>高等数学</li>
<li>线性代数</li>
<li>计算几何<ul>
<li>凸包</li>
<li>旋转卡壳</li>
<li>半平面交</li>
</ul>
</li>
<li>傅里叶变换</li>
<li>概率与期望</li>
</ul>
</li>
<li>搜索<ul>
<li>启发式搜索</li>
<li>随机化搜索</li>
<li>记忆化搜索</li>
<li>迭代深搜</li>
<li>dfs序</li>
</ul>
</li>
<li>字符串<ul>
<li>后缀平衡树</li>
<li>后缀自动机</li>
<li>后缀数组</li>
<li>后缀树</li>
<li>AC自动机</li>
<li>回文自动机</li>
<li>回文串</li>
<li>Hash</li>
<li>Kmp</li>
</ul>
</li>
<li>强制在线</li>
<li>bitset</li>
<li>高精度</li>
<li>贪心</li>
<li>模拟</li>
<li>构造</li>
<li>乱搞</li>
<li>二分</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/02/27/tag/" data-id="cjftq8ny60081e0kehwpd53xs" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/计划/">计划</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-uoj266" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/02/27/uoj266/" class="article-date">
  <time datetime="2018-02-27T11:05:29.000Z" itemprop="datePublished">2018-02-27</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/信息学竞赛/">信息学竞赛</a>►<a class="article-category-link" href="/categories/信息学竞赛/题目/">题目</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/02/27/uoj266/">UOJ266. 【清华集训2016】Alice和Bob又在玩游戏</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="http://uoj.ac/problem/266" target="_blank" rel="external">UOJ #266. 【清华集训2016】Alice和Bob又在玩游戏</a></p>
<h3 id="描述"><a href="#描述" class="headerlink" title="描述"></a>描述</h3><p>　　Alice 和 Bob 又在玩游戏。有$n$个节点，$m$ 条边（$0≤m≤n−1$），构成若干棵有根树，每棵树的根节点是该连通块内编号最小的点。Alice 和 Bob 轮流操作（Alice 先手），每回合选择一个没有被删除的节点 x，将x及其所有祖先全部删除，不能操作的人输。<br>　　需要注意的是，树的形态是在一开始就确定好的，删除节点不会影响剩余节点父亲和儿子的关系。比如：1-3-2 这样一条链，1 号点是根节点，删除 1 号点之后，3 号点还是 2 号点的父节点。<br>　　假设 Alice 和 Bob 都足够聪明，问 Alice 有没有必胜策略。</p>
<h3 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h3><p>第一行一个正整数 TT，表示该测试点有 TT 组数据；接下来 TT 组数据。</p>
<p>对于每组数据：<br>输入第一行两个整数 n, m，分别表示点数和边数（节点从 1 开始编号）。<br>接下来 m 行，每行两个正整数 a, b，表示节点 a 和节点 b 之间有一条边，输入数据中没有重边。</p>
<h3 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h3><p>输出 TT 行，每行输出 Alice 先手并且 Alice 和 Bob 都足够聪明的情况下谁获胜。</p>
<h3 id="样例"><a href="#样例" class="headerlink" title="样例"></a>样例</h3><h4 id="input"><a href="#input" class="headerlink" title="input"></a>input</h4><p>4<br>2 1<br>1 2<br>3 2<br>1 2<br>1 3<br>2 0<br>3 1<br>1 2</p>
<h4 id="output"><a href="#output" class="headerlink" title="output"></a>output</h4><p>Alice<br>Alice<br>Bob<br>Alice</p>
<h3 id="explanation"><a href="#explanation" class="headerlink" title="explanation"></a>explanation</h3><p>输入共 4 组数据；<br>第一组数据输入是一条链，Alice 可以一次性把所有节点都删掉。<br>第二组数据，Alice 先手第一步删除 1 号点即可胜利。</p>
<h3 id="限制与约定"><a href="#限制与约定" class="headerlink" title="限制与约定"></a>限制与约定</h3><p>对于10%的数据，$m=0$;<br>对于20%的数据，$1≤n≤20$;<br>对于40%的数据，$1≤n≤10^2$；<br>对于60%的数据，$1≤n≤10^3$；<br>对于100%的数据，$1≤T≤10,1≤n≤10^5,∑n≤2×10^5,0≤m≤n−1$,输入数据保证不会形成环，且每棵树的大小$≤5×10^4$。<br>时间限制：2s<br>空间限制：1024MB</p>
<h3 id="做法"><a href="#做法" class="headerlink" title="做法"></a>做法</h3><p>　　不要被<em>清华集训</em>吓倒了, 其实并没有想像中的那么难.这道我们只需要从最简单的思路一步步出发就能解决.<br>　　首先确立状态, 我们首先注意到它的模型和 $Multi-SG$ 有相似之处, 如果我们将一棵子树看成是一个”点”的话, 就会发现如果将某一子树$R$的根到它所在树的根的路径删除的话, 就会将这棵子树变成若干棵独立的树. 然后这若干棵独立的树又会进行下一轮游戏.<br>　　我们要求$R$的$SG$值, 就要求出$R$的所有后继状态, 它有哪些后继状态呢? 首先可以删除$R$的根, 或者删除$R$子树上的任意一个点$Y$.</p>
<ul>
<li>如果删除$R$的根, 后继状态是$R$的所有子树的异或和.</li>
<li>如果删除$R$的某一子树$X$上某一点$Y$, 所有的后继状态是$X$的所有后继状态异或上$R$的其它子树.<br>　　根据上述思路, 我们或许可以想到一个复杂度为$O(N^2)$的做法.因为求$SG$函数的复杂度为$O(N)$.但是一棵点数为十万的树有多少后继状态呢?太多了,因此需要更合适的办法.<br>　　我们观察到如果将每个$SG$值看成是一个01串的话, 我们需要对01串构成的集合求$mex$和对所有01串异或一个数, 我们自然而言的想到了用$01\text{ }Trie$来维护这一过程(<em>可以参考这道题目<a href="http://codeforces.com/problemset/problem/842/D" target="_blank" rel="external">CodeForces 842D Vitya and Strange Lesson</a></em>)可以先写一下这道题目, 我写的很费劲<a href="http://aiyoupass.com/2018/cf842d/"></a>.</li>
<li>对$01\text{ }Trie$异或一个数, 等价与在对应的数位上翻转子树.</li>
<li>求所有01串的的mex, 可以在每个节点上维护一个$size$, 找出最小的$size$不满的节点所对应的数.<br>　　该如何把上述方法应用到此题来呢?</li>
<li>首先我们需要求出每一棵独立的树的$SG$值, 然后异或起来这就是答案.</li>
<li>递归求解每棵树的$SG$函数, 从树根遍历到叶子, 然后逐步向上合并,这个过程用dfs实现.</li>
<li>每个点都有一棵Trie树, 记录以这个点为根的子树的所有后继状态, 这个点的$SG$函数就是这棵Trie树的$mex$, 叶子结点的SG值为1, 因为后继状态是$terminal position$.</li>
<li>每次dfs时先将所有子树的$SG$值异或起来得到一个数$T$, 然后将每个子结点$X$的Trie树异或所有兄弟结点($T\oplus Trie$), 其实就是给Trie树打标记.然后将其合并到父亲的Trie树上.最后在Trie中加入$T$, 这是直接删除树根的后继状态.</li>
</ul>
<h3 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h3><p>　　其实这段代码并不能通过测评, 在UOJ上因为”危险的系统调用”没有通过, 在BZOJ上因为”Runtime err”没通过, 但是我猜原因都是一样的, 因为内存调用方式不合理所以被系统杀死了.但是我将其和一段正确的代码做了对拍, 没有错误.所以我想等以后对指针有了更好的使用在回来看是哪里出了问题.<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> N 10000005</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="keyword">char</span> ch=getchar();<span class="keyword">int</span> s=<span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span>(;!<span class="built_in">isdigit</span>(ch);ch=getchar());</div><div class="line">	<span class="keyword">for</span>(;<span class="built_in">isdigit</span>(ch);s=s*<span class="number">10</span>+ch-<span class="string">'0'</span>,ch=getchar());</div><div class="line">	<span class="keyword">return</span> s;</div><div class="line">&#125;	</div><div class="line"></div><div class="line"><span class="keyword">struct</span> Edge&#123;</div><div class="line">	<span class="keyword">int</span> v,nxt;</div><div class="line">&#125;e[N];</div><div class="line"><span class="keyword">int</span> head[N],tot;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">AddEdge</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v)</span></span>&#123;</div><div class="line">	e[++tot]=(Edge)&#123;v,head[u]&#125;;head[u]=tot;</div><div class="line">	e[++tot]=(Edge)&#123;u,head[v]&#125;;head[v]=tot;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">struct</span> Node&#123;</div><div class="line">	Node *ch[<span class="number">2</span>];</div><div class="line">	<span class="keyword">int</span> all,length,mark;</div><div class="line">	Node()&#123;all=<span class="number">0</span>,length=<span class="number">0</span>,mark=<span class="number">0</span>;ch[<span class="number">0</span>]=<span class="literal">NULL</span>,ch[<span class="number">1</span>]=<span class="literal">NULL</span>;&#125;</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">pushdown</span><span class="params">()</span></span>&#123;</div><div class="line">		<span class="keyword">if</span>(<span class="keyword">this</span>==<span class="literal">NULL</span>)<span class="keyword">return</span> ;</div><div class="line">		<span class="keyword">if</span>(!mark)<span class="keyword">return</span> ;</div><div class="line">		<span class="keyword">if</span>(mark&amp;(<span class="number">1</span>&lt;&lt;(length<span class="number">-1</span>)))&#123;</div><div class="line">			swap(ch[<span class="number">0</span>],ch[<span class="number">1</span>]);</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">if</span>(ch[<span class="number">0</span>])ch[<span class="number">0</span>]-&gt;mark^=mark;</div><div class="line">		<span class="keyword">if</span>(ch[<span class="number">1</span>])ch[<span class="number">1</span>]-&gt;mark^=mark;</div><div class="line">		mark=<span class="literal">false</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">int</span> <span class="title">Query</span><span class="params">()</span></span>;</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">Merge</span><span class="params">(Node *)</span></span>;</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">Insert</span><span class="params">(<span class="keyword">int</span>,<span class="keyword">int</span>)</span></span>;</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">Print</span><span class="params">(<span class="keyword">int</span> s)</span></span>&#123;</div><div class="line">		<span class="keyword">if</span>(!length)&#123;</div><div class="line">			<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,s);</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">if</span>(ch[<span class="number">0</span>]!=<span class="literal">NULL</span>)ch[<span class="number">0</span>]-&gt;Print(s);</div><div class="line">		<span class="keyword">if</span>(ch[<span class="number">1</span>]!=<span class="literal">NULL</span>)ch[<span class="number">1</span>]-&gt;Print(s+(<span class="number">1</span>&lt;&lt;(length<span class="number">-1</span>)));</div><div class="line">	&#125;</div><div class="line">&#125;pool[N];</div><div class="line"></div><div class="line"><span class="function">Node *<span class="title">newNode</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="keyword">static</span> <span class="keyword">int</span> cnt=<span class="number">0</span>;</div><div class="line">	pool[cnt]=Node();</div><div class="line">	<span class="keyword">return</span> &amp;pool[cnt++];</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function">Node *<span class="title">merge</span><span class="params">(Node* r1,Node* r2)</span></span>&#123;</div><div class="line">	<span class="keyword">if</span>(!r1-&gt;length)&#123;</div><div class="line">		r1-&gt;all=<span class="literal">true</span>;</div><div class="line">		<span class="keyword">return</span> r1;</div><div class="line">	&#125;</div><div class="line">	r1-&gt;pushdown();r2-&gt;pushdown();</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">2</span>;++i)&#123;</div><div class="line">		<span class="keyword">if</span>(!r1-&gt;ch[i]&amp;&amp;r2-&gt;ch[i])&#123;</div><div class="line">			r1-&gt;ch[i]=newNode();</div><div class="line">			r1-&gt;ch[i]-&gt;length=r1-&gt;length<span class="number">-1</span>;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">if</span>(!r2-&gt;ch[i])<span class="keyword">continue</span>;</div><div class="line">		r1-&gt;ch[i]=merge(r1-&gt;ch[i],r2-&gt;ch[i]);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span>(r1-&gt;ch[<span class="number">0</span>]&amp;&amp;r1-&gt;ch[<span class="number">1</span>])</div><div class="line">		<span class="keyword">if</span>(r1-&gt;ch[<span class="number">0</span>]-&gt;all&amp;&amp;r1-&gt;ch[<span class="number">1</span>]-&gt;all)</div><div class="line">			r1-&gt;all=<span class="literal">true</span>;</div><div class="line">	<span class="keyword">return</span> r1;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">void</span> Node::Insert(<span class="keyword">int</span> len,<span class="keyword">int</span> data)&#123;</div><div class="line">	length=len;</div><div class="line">	<span class="keyword">if</span>(!len)&#123;</div><div class="line">		all=<span class="literal">true</span>;<span class="keyword">return</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">bool</span> s=data&amp;(<span class="number">1</span>&lt;&lt;(len<span class="number">-1</span>));</div><div class="line">	<span class="keyword">if</span>(ch[s]==<span class="literal">NULL</span>)ch[s]=newNode();</div><div class="line">	ch[s]-&gt;Insert(len<span class="number">-1</span>,data);</div><div class="line">	<span class="keyword">if</span>(ch[!s]!=<span class="literal">NULL</span>&amp;&amp;ch[<span class="number">0</span>]-&gt;all&amp;&amp;ch[<span class="number">1</span>]-&gt;all)</div><div class="line">		all=<span class="literal">true</span>;</div><div class="line">&#125;</div><div class="line"><span class="keyword">int</span> Node::Query()&#123;</div><div class="line">	<span class="keyword">int</span> ret=<span class="number">0</span>,s;</div><div class="line">	Node *now=<span class="keyword">this</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=now-&gt;length;i&gt;<span class="number">-1</span>;--i)&#123;</div><div class="line">		now-&gt;pushdown();</div><div class="line">		<span class="keyword">if</span>(!now-&gt;ch[<span class="number">0</span>])<span class="keyword">return</span> ret;</div><div class="line">		s=now-&gt;ch[<span class="number">0</span>]-&gt;all;</div><div class="line">		ret|=s&lt;&lt;(i<span class="number">-1</span>);</div><div class="line">		<span class="keyword">if</span>(s&amp;&amp;!now-&gt;ch[<span class="number">1</span>])<span class="keyword">return</span> ret;</div><div class="line">		now=now-&gt;ch[s];</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> ret;</div><div class="line">&#125;</div><div class="line"></div><div class="line">Node *rt[N];</div><div class="line"><span class="keyword">int</span> SG[N];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> fa)</span></span>&#123;</div><div class="line">	<span class="keyword">int</span> sg=<span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=head[x];i;i=e[i].nxt)&#123;</div><div class="line">		<span class="keyword">if</span>(e[i].v==fa)<span class="keyword">continue</span>;</div><div class="line">		sg^=dfs(e[i].v,x);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">bool</span> f=<span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=head[x];i;i=e[i].nxt)&#123;</div><div class="line">		<span class="keyword">if</span>(e[i].v==fa)<span class="keyword">continue</span>;</div><div class="line">		rt[e[i].v]-&gt;mark^=(sg^SG[e[i].v]);</div><div class="line">		<span class="keyword">if</span>(!f)&#123;</div><div class="line">			rt[x]=rt[e[i].v];</div><div class="line">			f=<span class="number">1</span>;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">else</span> rt[x]=merge(rt[x],rt[e[i].v]);</div><div class="line">	&#125;</div><div class="line">	rt[x]-&gt;Insert(<span class="number">20</span>,sg);</div><div class="line">	<span class="keyword">return</span> SG[x]=rt[x]-&gt;Query();</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="keyword">int</span> T,n,m,ans;</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;T);</div><div class="line">	<span class="keyword">while</span>(T--)&#123;</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;m);</div><div class="line">		ans=<span class="number">0</span>;</div><div class="line">		<span class="built_in">memset</span>(SG,<span class="number">-1</span>,<span class="keyword">sizeof</span>(SG));</div><div class="line">		<span class="built_in">memset</span>(head,<span class="literal">false</span>,<span class="keyword">sizeof</span>(head));</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)</div><div class="line">			rt[i]=newNode();</div><div class="line">		tot=<span class="number">0</span>;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;++i)</div><div class="line">			AddEdge(read(),read());</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)</div><div class="line">			<span class="keyword">if</span>(SG[i]&lt;<span class="number">0</span>)</div><div class="line">				ans^=dfs(i,<span class="number">0</span>);</div><div class="line">		<span class="built_in">printf</span>(ans?<span class="string">"Alice\n"</span>:<span class="string">"Bob\n"</span>);</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)</div><div class="line">			<span class="keyword">delete</span>[] rt[i],rt[i]=<span class="literal">NULL</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/02/27/uoj266/" data-id="cjftq8nym008he0kegxjzs4cj" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Multi-SG/">Multi-SG</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Trie/">Trie</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/博弈论/">博弈论</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-p1678" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/02/27/p1678/" class="article-date">
  <time datetime="2018-02-27T09:19:03.000Z" itemprop="datePublished">2018-02-27</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/信息学竞赛/">信息学竞赛</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/02/27/p1678/">P1678 烦恼的高考志愿</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="题目背景"><a href="#题目背景" class="headerlink" title="题目背景"></a>题目背景</h3><p>计算机竞赛小组的神牛V神终于结束了万恶的高考，然而作为班长的他还不能闲下来，班主任老t给了他一个艰巨的任务：帮同学找出最合理的大学填报方案。可是v神太忙了，身后还有一群小姑娘等着和他约会，于是他想到了同为计算机竞赛小组的你，请你帮他完成这个艰巨的任务。</p>
<h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p>根据n位学生的估分情况，分别给每位学生推荐一所学校，要求学校的预计分数线和学生的估分相差最小（可高可低，毕竟是估分嘛），这个最小值为不满意度。求所有学生不满意度和的最小值。读入数据有三行，第一行读入两个整数m,n。m表示学校数，n表示学生数。第二行共有m个数，表示m个学校的预计录取分数。第三行有n个数，表示n个学生的估分成绩。输出数据有一行，为最小的不满度之和。</p>
<h3 id="输入输出样例"><a href="#输入输出样例" class="headerlink" title="输入输出样例"></a>输入输出样例</h3><h3 id="输入样例-1："><a href="#输入样例-1：" class="headerlink" title="输入样例#1："></a>输入样例#1：</h3><p>4 3<br>513 598 567 689<br>500 600 550</p>
<h3 id="输出样例-1："><a href="#输出样例-1：" class="headerlink" title="输出样例#1："></a>输出样例#1：</h3><p>32</p>
<h3 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h3><p>数据范围：对于30%的数据，m，n&lt;=1000,估分和录取线&lt;=10000;对于100%的数据，n,m&lt;=100,000,录取线&lt;=1000000。</p>
<h3 id="做法"><a href="#做法" class="headerlink" title="做法:"></a>做法:</h3><p>　　题解区很多做法, 像:</p>
<ul>
<li>Treap (搞笑吧)</li>
<li>都排序, 双指针 (最好的办法)</li>
<li>队列 (原理同上)</li>
<li>排序, 二分查找 (一般想法)</li>
<li>Vector 强行查找 (我的最初想法)</li>
</ul>
<p>　　我帮我的一个大学弟(同级,刚学一段时间)找错误, 然后迅速码了一个 Vector 强行一波, 震撼的是, 竟然只得了70分. 另一个比较强大的同学插手, 然后我们霸占了提交榜的第一页, 虽然最后都 A 掉了, 好像是明白了什么……<br>　　那个率先稀里糊涂 A 掉的是我, 那个随后的是 mjt, 那个doubi是大学弟.<br><img src="/myjson/6.png" alt="2"><br><img src="/myjson/5.png" alt="1"><br>　　这个惨痛的教训提醒我们还是非常弱, 连普及- 的题目都花了那么长时间.</p>
<h3 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h3><h4 id="The-first"><a href="#The-first" class="headerlink" title="The first"></a>The first</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// luogu-judger-enable-o2</span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> N 1000005</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="built_in">vector</span>&lt;<span class="keyword">long</span> <span class="keyword">long</span>&gt;V;</div><div class="line"><span class="keyword">long</span> <span class="keyword">long</span> data[N];</div><div class="line"><span class="keyword">long</span> <span class="keyword">long</span> tmp;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">abs</span><span class="params">(<span class="keyword">int</span> s)</span></span>&#123;</div><div class="line">    <span class="keyword">return</span> s&gt;<span class="number">0</span>?s:-s;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">    <span class="keyword">int</span> n,m;</div><div class="line">    <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</div><div class="line">        <span class="built_in">cin</span>&gt;&gt;tmp;</div><div class="line">        V.insert(upper_bound(V.begin(),V.end(),tmp),tmp);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;++i)</div><div class="line">        <span class="built_in">cin</span>&gt;&gt;data[i];</div><div class="line">    <span class="keyword">long</span> <span class="keyword">long</span> ans=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;++i)&#123;</div><div class="line">        <span class="keyword">int</span> pos=lower_bound(V.begin(),V.end(),data[i])-V.begin();</div><div class="line">        <span class="keyword">long</span> <span class="keyword">long</span> a=<span class="built_in">abs</span>(V[pos<span class="number">-1</span>]-data[i]);</div><div class="line">        <span class="keyword">long</span> <span class="keyword">long</span> b=<span class="built_in">abs</span>(V[pos]-data[i]);</div><div class="line">        ans+=min(a,b);</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">cout</span>&lt;&lt;ans;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="The-Second"><a href="#The-Second" class="headerlink" title="The Second"></a>The Second</h4><p>第二次AC<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// luogu-judger-enable-o2</span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> int ll</span></div><div class="line"></div><div class="line"><span class="keyword">int</span> l,r,mid,sum;</div><div class="line"><span class="keyword">int</span> n,m,a[<span class="number">1000001</span>],b[<span class="number">1000001</span>];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">tfind</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</div><div class="line">    l=<span class="number">1</span>,r=m;</div><div class="line">    <span class="keyword">while</span>(l&lt;r)&#123;</div><div class="line">        mid=(l+r)&gt;&gt;<span class="number">1</span>;</div><div class="line">        <span class="keyword">if</span>(x&gt;a[mid])l=mid+<span class="number">1</span>;</div><div class="line">        <span class="keyword">else</span> r=mid<span class="number">-1</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span>(l&gt;=m)<span class="keyword">return</span> min(<span class="built_in">abs</span>(a[l<span class="number">-1</span>]-x),<span class="built_in">abs</span>(a[l]-x));</div><div class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(l&lt;=<span class="number">1</span>)<span class="keyword">return</span> min(<span class="built_in">abs</span>(a[l]-x),<span class="built_in">abs</span>(a[l+<span class="number">1</span>]-x));</div><div class="line">    <span class="keyword">return</span> min(min(<span class="built_in">abs</span>(a[l<span class="number">-1</span>]-x),<span class="built_in">abs</span>(a[l]-x)),<span class="built_in">abs</span>(a[l+<span class="number">1</span>]-x));</div><div class="line">&#125;</div><div class="line"></div><div class="line">main()&#123;</div><div class="line">    <span class="built_in">cin</span>&gt;&gt;m&gt;&gt;n;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++)<span class="built_in">cin</span>&gt;&gt;a[i];</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)<span class="built_in">cin</span>&gt;&gt;b[i];</div><div class="line">    sort(a+<span class="number">1</span>,a+<span class="number">1</span>+m);</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</div><div class="line">        sum+=tfind(b[i]);</div><div class="line">    <span class="built_in">cout</span>&lt;&lt;sum;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/02/27/p1678/" data-id="cjftq8nx7005ce0ke2n9cudzo" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/二分/">二分</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Fib-SG" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/02/27/Fib-SG/" class="article-date">
  <time datetime="2018-02-27T03:32:44.000Z" itemprop="datePublished">2018-02-27</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/信息学竞赛/">信息学竞赛</a>►<a class="article-category-link" href="/categories/信息学竞赛/总结/">总结</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/02/27/Fib-SG/">斐波那契博弈</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="51nod-1070-Bash游戏-V4"><a href="#51nod-1070-Bash游戏-V4" class="headerlink" title="51nod 1070 Bash游戏 V4"></a><a href="http://www.51nod.com/onlineJudge/questionCode.html#!problemId=1070" target="_blank" rel="external">51nod 1070 Bash游戏 V4</a></h2><h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p>　　有一堆石子共有N个。A B两个人轮流拿，A先拿。每次拿的数量最少1个，最多不超过对手上一次拿的数量的2倍（A第1次拿时要求不能全拿走）。拿到最后1颗石子的人获胜。假设A B都非常聪明，拿石子的过程中不会出现失误。给出N，问最后谁能赢得比赛。<br>　　例如N = 3。A只能拿1颗或2颗，所以B可以拿到最后1颗石子。</p>
<h3 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h3><p>第1行：一个数T，表示后面用作输入测试的数的数量。（1 &lt;= T &lt;= 1000)<br>第2 - T + 1行：每行1个数N。(1 &lt;= N &lt;= 10^9)</p>
<h3 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h3><p>共T行，如果A获胜输出A，如果B获胜输出B。</p>
<h3 id="Input示例"><a href="#Input示例" class="headerlink" title="Input示例"></a>Input示例</h3><p>3<br>2<br>3<br>4</p>
<h3 id="Output示例"><a href="#Output示例" class="headerlink" title="Output示例"></a>Output示例</h3><p>B<br>B<br>A</p>
<h3 id="做法"><a href="#做法" class="headerlink" title="做法"></a>做法</h3><h4 id="斐波那契博弈问题"><a href="#斐波那契博弈问题" class="headerlink" title="斐波那契博弈问题"></a>斐波那契博弈问题</h4><p>　　可以看出这是一个简单的斐波那契博弈问题, 也就是当 n 为斐波那契数的时候后手必胜, 但是由于以前从未接触过斐波那契堆所以来学习一下.</p>
<h4 id="齐肯多夫定理"><a href="#齐肯多夫定理" class="headerlink" title="齐肯多夫定理"></a>齐肯多夫定理</h4><p>　　任何正整数都可以被表示成不连续的斐波那契堆之和的形式, 斐波那契堆就是依据这个定理.<br>　　这个定理可以利用归纳法证明, 首先对于任意非斐波那契数 n , 存在$Fib_{i}&lt;n&lt;Fib_{i+1}$, 我们取满足性质的最大的 $i$, 设$n’=n-Fib{i}$, 又因为$Fib_{i-1}+Fib_{i}=Fib{i+1}$, 所以$n’&lt; Fib_{i-1}$.所以对于$n’$相似的划分能进行下去, 因此定理成立.</p>
<h4 id="证明"><a href="#证明" class="headerlink" title="证明"></a>证明</h4><p>　　证明对于 n 为斐波那契数先手必败.</p>
<ul>
<li>首先对于斐波那契数 $1,2,3$ 先手必败显然成立.</li>
<li>假设这个结论在$n\leq k$时成立,<br>对于$k+1$, $Fib_{k+1}=Fib_{k}+Fib_{k-1}$.<br>那么我们可以将这一堆石子看成两堆, 数量分别为$Fib_{k}$和$Fib_{k-1}$.<br>对于$Fib_{k-1}$先手总能取到最后一颗, 那么后手可以选择只取完$Fib_{k-1}$那么先手将面临取$Fib_{k}$的情况, 但是不同的是先手有可能会全部取完所以还需要考虑上一步后手取的数量.<br>通过归纳我们又知道后手在$Fib_{k-1}$取的最后一次不会超过$\frac{2}{3}Fib_{k-1}$, 所以先手在$Fib_{k}$堆中取的第一次不会超过$\frac{4}{3}Fib_{k-1}$.所以后手在$Fib_{k}$中仍然拥有必胜策略.</li>
</ul>
<p>问题得证</p>
<h3 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">55</span>;</div><div class="line"><span class="keyword">int</span> Fib[N]=&#123;<span class="number">1</span>,<span class="number">1</span>&#125;;</div><div class="line"><span class="keyword">int</span> n,now;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="built_in">cin</span>&gt;&gt;n;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;=<span class="number">50</span>;++i)</div><div class="line">		Fib[i]=Fib[i<span class="number">-1</span>]+Fib[i<span class="number">-2</span>];</div><div class="line">	<span class="keyword">while</span>(n--)&#123;</div><div class="line">		<span class="built_in">cin</span>&gt;&gt;now;</div><div class="line">		<span class="keyword">bool</span> flag=<span class="literal">false</span>;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">50</span>;++i)</div><div class="line">			<span class="keyword">if</span>(now==Fib[i])&#123;</div><div class="line">				<span class="built_in">printf</span>(<span class="string">"B\n"</span>);</div><div class="line">				flag=<span class="literal">true</span>;</div><div class="line">				<span class="keyword">break</span>;</div><div class="line">			&#125;</div><div class="line">		<span class="keyword">if</span>(!flag)</div><div class="line">		<span class="built_in">printf</span>(<span class="string">"A\n"</span>);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/02/27/Fib-SG/" data-id="cjftq8ntq000ae0kegc4qa0iy" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/博弈论/">博弈论</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/斐波那契博弈/">斐波那契博弈</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <a class="extend prev" rel="prev" href="/page/4/">&laquo; __('prev')</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><a class="page-number" href="/page/7/">7</a><span class="space">&hellip;</span><a class="page-number" href="/page/11/">11</a><a class="extend next" rel="next" href="/page/6/">__('next') &raquo;</a>
  </nav>
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/信息学竞赛/">信息学竞赛</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/信息学竞赛/其它/">其它</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/信息学竞赛/总结/">总结</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/信息学竞赛/我的文档/">我的文档</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/信息学竞赛/考试/">考试</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/信息学竞赛/题目/">题目</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/信息学竞赛/题目/模板/">模板</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/其它/">其它</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/数学/">数学</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/数学/线性代数/">线性代数</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/解决方案/">解决方案</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/解决方案/Hexo/">Hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/解决方案/LaTeX/">LaTeX</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/解决方案/VSCode/">VSCode</a></li></ul></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/2-SAT/">2-SAT</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Anti-SG/">Anti-SG</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Beatty定理/">Beatty定理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CDQ分治/">CDQ分治</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CodeForces/">CodeForces</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Debug/">Debug</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Every-SG/">Every-SG</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Floyd/">Floyd</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hexo/">Hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ICG/">ICG</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LaTeX/">LaTeX</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Lasker-s-Nim/">Lasker's Nim</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Link-Cut-Tree/">Link-Cut-Tree</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Matrix-Tree/">Matrix-Tree</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Misere-Games/">Misère Games</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Multi-SG/">Multi-SG</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NOIP/">NOIP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/">Python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SDOI/">SDOI</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SG函数/">SG函数</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Tarjan/">Tarjan</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TikZ/">TikZ</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Trie/">Trie</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Zeckendorf定理/">Zeckendorf定理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bfs/">bfs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/copyright/">copyright</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/document/">document</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lca/">lca</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nim/">nim</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pb-ds/">pb_ds</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pdf/">pdf</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/source/">source</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/with-draw/">with draw</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/一堆简单题/">一堆简单题</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/三维偏序/">三维偏序</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/二分/">二分</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/二分答案/">二分答案</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/二维前缀和/">二维前缀和</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/二维线段树/">二维线段树</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/二进制拆分/">二进制拆分</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/位运算/">位运算</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/倍增/">倍增</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/内存池/">内存池</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/决策单调性/">决策单调性</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/分块/">分块</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/分数规划/">分数规划</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/前缀和/">前缀和</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/动态规划/">动态规划</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/区间dp/">区间dp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/单调栈/">单调栈</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/单调队列/">单调队列</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/博弈论/">博弈论</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/后缀数组/">后缀数组</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/四边形不等式优化/">四边形不等式优化</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/回文串/">回文串</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/图论/">图论</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/基环树/">基环树</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/堆优化Dijkstra/">堆优化Dijkstra</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/多重标记/">多重标记</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/多重背包/">多重背包</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/威佐夫博弈/">威佐夫博弈</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/字符串/">字符串</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/差分约束/">差分约束</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/巴什博弈/">巴什博弈</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/带权并查集/">带权并查集</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/平衡树/">平衡树</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/并查集/">并查集</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/异或/">异或</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/强制在线/">强制在线</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/强联通分量/">强联通分量</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/归并排序/">归并排序</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/快速幂/">快速幂</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/打表/">打表</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/扩展欧几里得/">扩展欧几里得</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/拆点/">拆点</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/拓扑排序/">拓扑排序</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/指针/">指针</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/排列组合/">排列组合</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/搜索/">搜索</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数学/">数学</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数论/">数论</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/斐波那契博弈/">斐波那契博弈</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/斐波那契数列/">斐波那契数列</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/斜率优化/">斜率优化</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/无限/">无限</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/最大公约数/">最大公约数</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/最大流/">最大流</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/最小生成树/">最小生成树</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/最短路/">最短路</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/最长上升子序列/">最长上升子序列</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/最长公共子序列/">最长公共子序列</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/构造/">构造</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/查分/">查分</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/树/">树</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/树形dp/">树形dp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/树状数组/">树状数组</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/模拟/">模拟</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/模板/">模板</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/欧拉函数/">欧拉函数</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/测试/">测试</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/版权信息/">版权信息</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/生成树/">生成树</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/矩阵快速幂/">矩阵快速幂</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/秦九韶算法/">秦九韶算法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/等差数列/">等差数列</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/线性代数/">线性代数</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/线段树/">线段树</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/网络流/">网络流</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/考试/">考试</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/背包/">背包</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/艺术/">艺术</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/莫比乌斯反演/">莫比乌斯反演</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/规律/">规律</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/解决方案/">解决方案</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/计划/">计划</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/贪心/">贪心</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/逆元/">逆元</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/逆序对/">逆序对</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/错位排列数/">错位排列数</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/题目/">题目</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/高精/">高精</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/2-SAT/" style="font-size: 10px;">2-SAT</a> <a href="/tags/Anti-SG/" style="font-size: 10px;">Anti-SG</a> <a href="/tags/Beatty定理/" style="font-size: 11.25px;">Beatty定理</a> <a href="/tags/CDQ分治/" style="font-size: 10px;">CDQ分治</a> <a href="/tags/CodeForces/" style="font-size: 10px;">CodeForces</a> <a href="/tags/Debug/" style="font-size: 10px;">Debug</a> <a href="/tags/Every-SG/" style="font-size: 10px;">Every-SG</a> <a href="/tags/Floyd/" style="font-size: 10px;">Floyd</a> <a href="/tags/Hexo/" style="font-size: 12.5px;">Hexo</a> <a href="/tags/ICG/" style="font-size: 11.25px;">ICG</a> <a href="/tags/LaTeX/" style="font-size: 10px;">LaTeX</a> <a href="/tags/Lasker-s-Nim/" style="font-size: 10px;">Lasker's Nim</a> <a href="/tags/Link-Cut-Tree/" style="font-size: 10px;">Link-Cut-Tree</a> <a href="/tags/Matrix-Tree/" style="font-size: 10px;">Matrix-Tree</a> <a href="/tags/Misere-Games/" style="font-size: 10px;">Misère Games</a> <a href="/tags/Multi-SG/" style="font-size: 11.25px;">Multi-SG</a> <a href="/tags/NOIP/" style="font-size: 17.5px;">NOIP</a> <a href="/tags/Python/" style="font-size: 11.25px;">Python</a> <a href="/tags/SDOI/" style="font-size: 10px;">SDOI</a> <a href="/tags/SG函数/" style="font-size: 10px;">SG函数</a> <a href="/tags/Tarjan/" style="font-size: 10px;">Tarjan</a> <a href="/tags/TikZ/" style="font-size: 10px;">TikZ</a> <a href="/tags/Trie/" style="font-size: 12.5px;">Trie</a> <a href="/tags/Zeckendorf定理/" style="font-size: 10px;">Zeckendorf定理</a> <a href="/tags/bfs/" style="font-size: 10px;">bfs</a> <a href="/tags/copyright/" style="font-size: 10px;">copyright</a> <a href="/tags/document/" style="font-size: 12.5px;">document</a> <a href="/tags/lca/" style="font-size: 10px;">lca</a> <a href="/tags/nim/" style="font-size: 11.25px;">nim</a> <a href="/tags/pb-ds/" style="font-size: 10px;">pb_ds</a> <a href="/tags/pdf/" style="font-size: 16.25px;">pdf</a> <a href="/tags/source/" style="font-size: 10px;">source</a> <a href="/tags/with-draw/" style="font-size: 11.25px;">with draw</a> <a href="/tags/一堆简单题/" style="font-size: 10px;">一堆简单题</a> <a href="/tags/三维偏序/" style="font-size: 10px;">三维偏序</a> <a href="/tags/二分/" style="font-size: 10px;">二分</a> <a href="/tags/二分答案/" style="font-size: 11.25px;">二分答案</a> <a href="/tags/二维前缀和/" style="font-size: 10px;">二维前缀和</a> <a href="/tags/二维线段树/" style="font-size: 10px;">二维线段树</a> <a href="/tags/二进制拆分/" style="font-size: 10px;">二进制拆分</a> <a href="/tags/位运算/" style="font-size: 10px;">位运算</a> <a href="/tags/倍增/" style="font-size: 13.75px;">倍增</a> <a href="/tags/内存池/" style="font-size: 11.25px;">内存池</a> <a href="/tags/决策单调性/" style="font-size: 10px;">决策单调性</a> <a href="/tags/分块/" style="font-size: 11.25px;">分块</a> <a href="/tags/分数规划/" style="font-size: 11.25px;">分数规划</a> <a href="/tags/前缀和/" style="font-size: 10px;">前缀和</a> <a href="/tags/动态规划/" style="font-size: 20px;">动态规划</a> <a href="/tags/区间dp/" style="font-size: 10px;">区间dp</a> <a href="/tags/单调栈/" style="font-size: 10px;">单调栈</a> <a href="/tags/单调队列/" style="font-size: 11.25px;">单调队列</a> <a href="/tags/博弈论/" style="font-size: 18.75px;">博弈论</a> <a href="/tags/后缀数组/" style="font-size: 11.25px;">后缀数组</a> <a href="/tags/四边形不等式优化/" style="font-size: 10px;">四边形不等式优化</a> <a href="/tags/回文串/" style="font-size: 10px;">回文串</a> <a href="/tags/图论/" style="font-size: 13.75px;">图论</a> <a href="/tags/基环树/" style="font-size: 10px;">基环树</a> <a href="/tags/堆优化Dijkstra/" style="font-size: 10px;">堆优化Dijkstra</a> <a href="/tags/多重标记/" style="font-size: 10px;">多重标记</a> <a href="/tags/多重背包/" style="font-size: 10px;">多重背包</a> <a href="/tags/威佐夫博弈/" style="font-size: 11.25px;">威佐夫博弈</a> <a href="/tags/字符串/" style="font-size: 15px;">字符串</a> <a href="/tags/差分约束/" style="font-size: 11.25px;">差分约束</a> <a href="/tags/巴什博弈/" style="font-size: 10px;">巴什博弈</a> <a href="/tags/带权并查集/" style="font-size: 10px;">带权并查集</a> <a href="/tags/平衡树/" style="font-size: 11.25px;">平衡树</a> <a href="/tags/并查集/" style="font-size: 10px;">并查集</a> <a href="/tags/异或/" style="font-size: 11.25px;">异或</a> <a href="/tags/强制在线/" style="font-size: 10px;">强制在线</a> <a href="/tags/强联通分量/" style="font-size: 10px;">强联通分量</a> <a href="/tags/归并排序/" style="font-size: 10px;">归并排序</a> <a href="/tags/快速幂/" style="font-size: 10px;">快速幂</a> <a href="/tags/打表/" style="font-size: 10px;">打表</a> <a href="/tags/扩展欧几里得/" style="font-size: 10px;">扩展欧几里得</a> <a href="/tags/拆点/" style="font-size: 10px;">拆点</a> <a href="/tags/拓扑排序/" style="font-size: 10px;">拓扑排序</a> <a href="/tags/指针/" style="font-size: 12.5px;">指针</a> <a href="/tags/排列组合/" style="font-size: 10px;">排列组合</a> <a href="/tags/搜索/" style="font-size: 16.25px;">搜索</a> <a href="/tags/数学/" style="font-size: 10px;">数学</a> <a href="/tags/数论/" style="font-size: 10px;">数论</a> <a href="/tags/斐波那契博弈/" style="font-size: 10px;">斐波那契博弈</a> <a href="/tags/斐波那契数列/" style="font-size: 10px;">斐波那契数列</a> <a href="/tags/斜率优化/" style="font-size: 11.25px;">斜率优化</a> <a href="/tags/无限/" style="font-size: 10px;">无限</a> <a href="/tags/最大公约数/" style="font-size: 10px;">最大公约数</a> <a href="/tags/最大流/" style="font-size: 10px;">最大流</a> <a href="/tags/最小生成树/" style="font-size: 11.25px;">最小生成树</a> <a href="/tags/最短路/" style="font-size: 16.25px;">最短路</a> <a href="/tags/最长上升子序列/" style="font-size: 11.25px;">最长上升子序列</a> <a href="/tags/最长公共子序列/" style="font-size: 10px;">最长公共子序列</a> <a href="/tags/构造/" style="font-size: 11.25px;">构造</a> <a href="/tags/查分/" style="font-size: 10px;">查分</a> <a href="/tags/树/" style="font-size: 10px;">树</a> <a href="/tags/树形dp/" style="font-size: 16.25px;">树形dp</a> <a href="/tags/树状数组/" style="font-size: 11.25px;">树状数组</a> <a href="/tags/模拟/" style="font-size: 17.5px;">模拟</a> <a href="/tags/模板/" style="font-size: 16.25px;">模板</a> <a href="/tags/欧拉函数/" style="font-size: 10px;">欧拉函数</a> <a href="/tags/测试/" style="font-size: 11.25px;">测试</a> <a href="/tags/版权信息/" style="font-size: 10px;">版权信息</a> <a href="/tags/生成树/" style="font-size: 13.75px;">生成树</a> <a href="/tags/矩阵快速幂/" style="font-size: 11.25px;">矩阵快速幂</a> <a href="/tags/秦九韶算法/" style="font-size: 10px;">秦九韶算法</a> <a href="/tags/等差数列/" style="font-size: 10px;">等差数列</a> <a href="/tags/线性代数/" style="font-size: 11.25px;">线性代数</a> <a href="/tags/线段树/" style="font-size: 17.5px;">线段树</a> <a href="/tags/网络流/" style="font-size: 10px;">网络流</a> <a href="/tags/考试/" style="font-size: 10px;">考试</a> <a href="/tags/背包/" style="font-size: 11.25px;">背包</a> <a href="/tags/艺术/" style="font-size: 11.25px;">艺术</a> <a href="/tags/莫比乌斯反演/" style="font-size: 11.25px;">莫比乌斯反演</a> <a href="/tags/规律/" style="font-size: 11.25px;">规律</a> <a href="/tags/解决方案/" style="font-size: 15px;">解决方案</a> <a href="/tags/计划/" style="font-size: 13.75px;">计划</a> <a href="/tags/贪心/" style="font-size: 15px;">贪心</a> <a href="/tags/逆元/" style="font-size: 10px;">逆元</a> <a href="/tags/逆序对/" style="font-size: 10px;">逆序对</a> <a href="/tags/错位排列数/" style="font-size: 10px;">错位排列数</a> <a href="/tags/题目/" style="font-size: 10px;">题目</a> <a href="/tags/高精/" style="font-size: 11.25px;">高精</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/04/10/dphigher/">动态规划题目选做</a>
          </li>
        
          <li>
            <a href="/2018/04/10/dpeasypros/">历年NOIP简单动态规划题目选做</a>
          </li>
        
          <li>
            <a href="/2018/04/07/noip2014d2/">NOIP 2014 Day1</a>
          </li>
        
          <li>
            <a href="/2018/04/07/noip2014d1/">NOIP 2014 Day1</a>
          </li>
        
          <li>
            <a href="/2018/04/06/SuffixArray/">后缀数组</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="/js/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>